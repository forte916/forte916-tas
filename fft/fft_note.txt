FFT note
========

Emulator
--------
* psxjin v2.0.2
* psxjin.ini
  * PsxAuto=1
  * PsxOut=1
  * この設定をしないとガフガリオンの最初のターンでフリーズする
  * disable coord check を checked にする設定も必要らしいが未検証

RNG
----
* 0x9010 is the address of RNG with BIOS rand() function

* about seed
	* When srand() is called
	  * 電源投入時に seed = 1 で初期化される
	  * 拠点到着時にゲーム時間を元に seed が更新される
	  * soft reset では seed は更新されない (srand は呼ばれない)
	* When rand() is called
	  * 1f 毎に変化する (1f 毎に rand を call している)


FurShop glitch
-------------
* furshop glitch takes 1474f
* 1637f is fastest at soft rest
* soft reset しても rng seed の初期化は発生しない
* furshop inventory 0x80056818 (JPv1.1)
* furshop inventory 0x80059494 (US)
* 暗転中にアイテムがロードされるので編成画面が表示されたら
  即 soft reset でOK. ダーラボンのセリフは表示前でよい


Ramza 初期ステータス
--------------------
* new game 押下後 Arazlam のセリフスキップ後にステータスが決定される
* High starting
  * Squire と Chemist 以外のジョブの JP も高いバランス型が理想
  * Squire  JP
    * 190 or higher
  * Chemist JP
    * 190 or higher
  * Wizard JP, Priest JP, Calculator JP, Time mage JP, Oracle JP
    * 7ジョブ合計で 1200 以上が目安

* RNG とラグフレーム
	* ラグフレームの総数を変えても RNG が同じであれば status は同じ
	* ただし、 Tutorial で soft reset した場合と即 cancel した場合では、同じ RNG でも status は変わる
	* よって、調整にラグフレームの総数を変えるのは意味がない
	* メモリ内の何らかの状態が変われば、同じ RNG でも結果は変わる


ch1-Orbonne
-----------
* オーボンヌ内の最後の ovelia のセリフで敵星座が決定
  * Gafgarion は 敵 2体に攻撃可能
  * Agrius は 敵 1体に攻撃可能
  * Gafgarion は Agrius 正面の敵と相性が悪いと別の 1体を狙う
  * Gafgarion と Agruis が別々の敵を倒すよう誘導(調整)することで
    1ターン目で 2体を倒すことが可能

* Orbonne party condition
	* MUST:
		* gaf: ID6 の archer と相性が良い or ID7 の archer と相性が悪い (turn1)
		* knight: agrias と best 相性でない
	
	* Better:
		* gaf の turn1 で スキルの詠唱ではなく、スキル名が表示される
			* これは RNG で変わらない
			* 戦闘前に既に決定されていると思われる。
		* Lv up, Jp up しない
		* 味方が黒魔法を持っていない (特に rad)
			* rad が Black-Magic を持っていると、思考時間が顕著に長くなる
		* lavian は thrown stone を set (turn1 で投石すると turn2 は回ってこない)
		* knight と ramza の相性が良い. ramza と rad のクリティカルで 2hit で倒せる
			* knight と ramza, alicia の相性が normal の場合、normal hit では 3hit で倒せないので、誰かの critical が必須
		* gaf: ID8 の archer と相性が良い or ID9 の chemist と相性が悪い (turn2)
			* gaf の turn2 で chemist を倒すと、agrias が archer を倒さないといけなくなり扉から離れる
			* また chemist を最後に残した場合、lavian が投石を持っていない場合 lavian のダメージが入るため
			  agrias は critical が必要ない
		* agrias: Jp 163以上は Jp up する. Jp 162 以下はぎりぎり Jp up しない


* turn1
  * change option
    *  5.メッセージの表示速度  ->速い
    *  6.ナビゲーションメッセージの有無  -> OFF
    *  7.アビリティ名の表示  -> OFF
    *  8.効果メッセージの表示  -> OFF
    *  9.経験値Jp取得の表示  -> OFF
    * 11.ジョブ別装備付加アイテムの表示  -> OFF
    * 12.ジョブチェンジ時の最強装備  -> OFF
  * 3マス進む

* 改善点
	* この window も ←←→→ のような入力で表示が早くなるか検証する
	*  2.カーソルのリピート速度  ->速い
		* バトルフィールドでのパネル移動
		* パネル移動は 1f おきの入力を受け付ける TAS の方が早いのでオプション変更の必要ない
	*  4.指カーソルの速度  ->すごく速い
		* Menu の上下左右移動
		* 5つ以上連続移動する場合は、押しっぱなしの方が早い
		* Worldmap でも有効なら TAS でも必要か
	* 4マスではなく 3マス進む
		* --> 3マス進むより最大歩数進んで 2turn 目に弓使いもしくはアイテム士を倒すほうが早い


* カメラ移動があると数フレーム遅くなる
* カメラ移動で敵や味方の行動開始フレームがずれるので、乱数調整が可能

* Gafgarion turn1
	* L2 zoom out
	* R1 (rotate) or R2 (angle)
	* R1 の方が 12f 早い
* Agrius turn1
* Ramza turn1
	* knight に背を向ける向きで待機
* Alicia & Lavian turn1
	* Alicia か Lavian のどちらかで L1 回転する
	* どちらが早いかは、その後の敵の行動にも左右される
* Rad turn1
	* Alicia, Lavian, その後の enemy の turn のそれぞれで、カメラ操作を試し clitical が出るか検証すべき

* Agrias turn2
	* Agrias turn2 の前に camera 視点を戦闘前と同じ視点にしておく
		* 他の視点だと、移動時に回転する
	* Agrias をなるべく扉近くに誘導する
		* そのために chemist を最後に残すのがよい
		* archer を最後に残すと扉からの距離が長くなり、余分に移動する

* 最後の敵を倒す前にカメラを戦闘前と同じ視点にしておく
	* 別の視点だと Agrius が扉に移動する際にカメラ回転してしまう
	* 可能であれば Agrius は扉近くが望ましい


* "Let go of me" said Ovelia
  * testrun_tas   = 19406f,  5:23
  * optimze_tas   = 16619f,  4:37 , 2787f faster, optimize
  * calc2_tas     = 16073f,  4:xx , 3333f faster, 546f faster, retry=9
  * calc2_tas     = 16055f,  4:xx , 3351f faster, 564f faster, retry=57
  * calc2_furshop = 15623f,  4:xx , 3783f faster, 996f faster, retry=23
  * calc2_furshop = 16326f,  4:xx , 3080f faster, 293f faster, retry=23
  * calc2_furshop = 16446f,  4:37 , 2960f faster, 173f faster, retry=31
  * calc2_furshop = 16883f,  4:37 , xxxxf faster, xxxf faster, retry=22
  * youtube_tas   =       ,  4:25

* "ゴルターナ軍にいるんだ" said Ramza
  * calc2_furshop = 18071f - 16326f = 1745f, retry=23		29f slower
  * calc2_furshop = 18162f - 16446f = 1716f, retry=31
  * calc2_furshop = 18599f - 16883f = 1716f, retry=22




* Orbonne 戦闘終了の会話は 手動と text_skip.lua とで同じ結果
* text_skip.lua を信用してもよさそう

```
### fft_optimize1 は retry=5 を採用
* retry=5 は gaf が Lv up, JP Lv up する
* Lv up は約 100f, JP Lv up は 約50f のエフェクトを消費する
* retry=29 のように Lv up エフェクトのない構成を選択した方がよい
```


Lv1 Chemist 初期ステータス
--------------------------
* 戦闘後の最後の Ramza のセリフで味方ステータスが決定
* High starting
  * Chemist JP
    * grind 200 JP for Wizard
  * Faith
  * Chemist JP 190以上, Faith 70以上が理想
  * Female の方が MA が +1 高い


Lv1 Squire 初期ステータス
------------------------
* High starting
  * Squire JP
    * grind 200 JP for Knight
  * Knight JP

* ボツ案
  * Squire JP
  * 味方見習い戦士で残り JP が 100以上
  * Gariland で稼いで 取得 Jp UP を覚えるため
  * その後クリスタル化して継承
    * 見習いのクリスタルを Ramza は継承できないのでボツ案
  * もしくは Mandalia で取得 Jp UP を覚えている敵を探す
  * Gariland の敵は Lv1 のため取得Jp UP は覚えていない


* taskitten-san TAS
	* party
	* Chemist:faith=73, chemist=196, Taurus(金牛)
	* Squire :squire=184, knight=195
	* hire
	* Squire :faith=69, squire=185, chemist=198, wizard=162, priest=110, oracle=199, time=137, calc=198, total=1189, Aries(白羊)
	* Squire :faith=68, chemist=191, priest=195, Aquarius(宝瓶)


ch1-Gariland
------------
* セーブ画面のキャンセル後に敵星座が決定
  * 屋根の上に来る Female Squire と相性良 (Any)
  * lether hat and dagger の Male Squire と相性良 (Ramza)

* 配置
  ----F
  XXMRF
  XM---

* turn1
  * カメラ移動があると数フレーム遅くなる
  * 敵移動中にカメラ移動する
  * Ramza セリフ後 再度 L2, R2

### old
* Ramza
  * Squire JP 250 for Gained JP UP(250) or Yell(200)
    * 実際は 300JP 貯まらない
  * Chemist JP 200 for Wizard
* Chemist
  * Chemist JP 200 for Wizard
  * Lv2 (recomend because of boosting MP)

### new
* Ramza
  * Squire  JP 250 for Gained JP UP(250)
  * Chemist JP 200 for Wizard
* Chemist
  * Chemist JP 200 for Wizard
* Squire x2
  * Squire  JP 200 for Knight

* 改善案
  * turn1
    * 右の屋根の上の敵を critical で倒す (any)
  * turn2
    * lether hat and dagger の Male Squire を critical で倒す (Ramza)
    * Ramza 5歩でぎりぎり届く
    * この敵は投石を覚えていない方が早いが、そもそも投石が届く範囲に味方を移動させない
  * L2, R2 を使いカメラ移動

* ボツ案
  * 味方 Squire に取得Jp UP 覚えさせるため 250jp 稼ぐ
  * Gariland の敵は Lv1 のため取得Jp UP は覚えていない

### old
* after battle
  * world map に出たら x で説明をキャンセル
  * Ramza, learn Yell 200JP
  * Chemist
    * job change Wizard
    * learn Bolt 50JP, MagicAttackUP 400JP
    * set MagicAttackUP
  * Chemist 以外のユニット除名

### new
* after battle 改善案
  * world map に出たら x で説明をキャンセル
  * 編成はバルバネスのイベント見たあと
  * ここでは除名しない
  * Ramza
    * learn Gained JP-UP, Bolt3, Frog, Death, Flare, Magic attack up
       * use jp scroll glith, Ice -> Ice2
    * Counter Magic は必要ない. Balk は Face rod で OK
    * set Gained JP-UP, Black Magic
    * remove Battle Boots
  * Delita
    * change Chemist
  * Female Chemist
    * change Wizard
    * learn Bolt, Bolt2, Magic attack up
       * use jp scroll glith, Ice -> Ice2
    * set Magic attack up
    * best fits to equip Battle Boots
  * Male Squire x2
    * change Knight
    * set Item


ch1-Mandalia
------------
### old
* Ramza
  * ためる 300jpと取得JpUP 250jp の 550JP を稼ぐ
  * ex1) エールを覚えてエールで稼ぐ
  * ex2) 取得JP UP を覚えて普通の行動で稼ぐ
  * エールの方が全体で見ると早いらしい

* 配置
  * Ramza と黒魔道士
  * redpanther が 2撃で倒せるよう敵HP調整
    * 相性良 (24 damage となる)
    * 相性普通 (20 damage) and HP40以下
    * 稼ぎ終了後に Ramza の Lv が nn になっている想定

* turn1
  * Ramza, Yell
  * 黒魔道士, Bolt, 敵1体倒す

* turn2
  * Ramza, Yell
  * 黒魔道士, Bolt, アルガスを巻き込んで敵3体倒す
  * Algus セリフ後 再度 L2, R2

* turn3
  * redpanther だけになるので稼ぐ
  * Wizard, Bolt で Delita 巻き込んで倒す

* turnN
  * Algus の死体の奥の安全地帯で稼ぐ


### new
* Ramza
  * Ramza   300jp for Accumulates
  * Knight  250jp for Speed Break

* 配置
  * Ramza を 3 に配置するのが Delita との会話が一番はやい
  * Ramza, Wizard, Knight x2
  R-KXX
  W-K-X

* 改善案
  * Ramza,  300jp for Accumulates
  * Knight, 250jp for Speed Break
  * Delita の turn, L2, R2
  * Algus セリフ後 再度 L2, R2
  * 敵シーフのみ Lv2 なので Gained JP-UP を覚えている可能性がある
    しかし Ramza(jobid=0x01) は 見習い(jobid=0x4A) のクリスタル継承不可

* 検証
  * Accumulates で 250jp 稼ぐ
    * 22回行動 (1回 12jp or 14jp)
  * Gained JP-UP で 300jp 稼ぐ
    * 15回行動 (1回 18jp or 21jp)
  * 味方が KO からクリスタルになるまでに Ramza 3回行動可能
    * Ramza 237jp 超えたら 味方を KO してよい
    * 4回行動可能なときもあるが、 redpanther を倒す前に Crystal となってしまう

* Gained JP-UP を覚えているか検証
  * バルバネスイベント後約 2700f 後に Gained JP-UP を覚えている敵がいる
  * game time が同じなら乱数は異なってもよい
  * ただし game time が同じでも編成画面の表示回数??(world mapの表示回数??) 
    が異なると、覚えているスキルが異なる

* Gained JP-UP の Crystal
  * Job が同じでないとスキル継承不可
  * Ramza(0x01) と Male Squire(0x4A) や job が異なるので見習いスキルを継承不可
  * 疑問点として Female Squire も Male Squire のスキル継承不可
    * これにより Female Calculator もボツ案
  * http://www.gamefaqs.com/ps/197339-final-fantasy-tactics/faqs/3876
    [6.1] Crystal

* 検証
  * Algus がクリティカルで squire か thief を倒す
    * 相性の良し悪しがあれば相性を優先
    * 通常は squire を狙う
  * Ramza が残りの 3 squire を Bolt2
    * 相性良 かつ faith 47 以上
    * 相性普通 かつ faith 58 以上
    * 相性悪 かつ faith 64 以上
  * wizard が Algus と残り 1体 を Bolt or Bolt2
    * thief を残した場合は thief が charm を覚えていること
  * これで最初のターンで redpanther 以外を倒せるが
    安全地帯を作りにくいので、稼ぎには向かない
  * Delita に Battle Boots を履かせたら Algus と Delita で安全地帯ができるかも
  * デメリット
    * Algus との相性、Ramza との相性の調整が難しい
    * Algus のクリティカル(一撃で倒す)は出ない時は 500f 探索しても出ない
    * 調整が大変なので結局は、定石の安置の作戦がいいかも


### old
* after battle, formation
  * Ramza
    * job change Priest
    * learn  Accumulates 300JP, Gained JP UP 250JP
    * set guts, Gained JP UP

### new
  * Ramza
    * job change Priest or Wizard
    * learn Accumulates 300JP
    * set Guts
  * Knight
    * learn Speed Break



ch1-random
-----
* Priest and Monk becomes speed 7 at Lv8
* Goblin becomes speed 6 at Lv14

* 改善案
	* Battle 1
		* 汎用A: squire/chemist
			* speed break x1( or x2) to 汎用E
			* speed break x2 to goblin
			* become crystal
		* 汎用E: (Gariland で出撃していない) squire/chemist
			* squrie up to Lv2, chemist up to Lv2
			* inherit crystal
		* Ramza:
			* Frog to goblin
	* Battle 2
		* 汎用B: knight
			* speed break x1( or x2) to 汎用E
			* speed break x2 to goblin
			* become crystal
		* 汎用C: wizard
			* Frog to goblin
			* inherit crystal
	* Battle 3
		* 汎用C: wizard
			* speed break x2 to goblin
			* Frog to goblin
			* become crystal
	* Battle 4
		* 汎用E: wizard
			* speed break x1( or x2) to 汎用E
			* speed break x2 to goblin
			* become crystal
		* 汎用D: wizard
			* Frog to goblin
			* inherit crystal
	* Battle 3
		* 汎用D: wizard
			* speed break x2 to goblin
			* Frog to goblin
			* become crystal




* 改善案
  * 敵1体のみ編成を 1000f 程度探索
  * 2体目が Ramza に近づくまで 4 turn かかり、それが約 1000f
  * よって 1000f 待った方が結果的に早くなる
  * エンカ率 3/10 * 敵1体のみ 1/256 = 3/2560 = 約1/853
  * L2 押したほうがカメラ移動が減るかも

* ボツ案
  * ガッツではなく話術はどうか
    * ためるより遅いが、ドーピング, Sleep, CT reset 等が可能
    * 話術は Yell と同じエフェクトの長さ 約284f
    * モンスターはまじゅう語をセットしないと効かないので、実質ドーピングのみ
    * まじゅう語をセットすると取得JP UP がセットできないのでボツ

* ボツ案
  * Time mage と Calculator は味方 Wizard を出す
    * Calculator のときに 味方 Time mage を出せれば haste をかけれる
  * 2体目のゴブリンは Wizard が倒す
  * Time mage の稼ぎは Haste (100jp) 覚えると早いのでは?
    * 魔法をたくさん覚えると menu がスクロールしてしまい loop 選択できなくなる
  * Oracle の稼ぎは不変不動 (100jp) を覚えると早いのでは?
    * 不変不動はすぐ切れる
  * ゴブリンは Lv14 で speed 6 になる模様
  * Time mage のときに goblin が Lv13 以下になるように調整が必要
    * Keep Ramza's Lv under 14
  * Ramza speed 12, goblin speed 5 のとき, Ramza 2回行動, goblin 1回待機 となる

* 改善案
  * Yell (200JP) より Speed Break (250JP) の方が効果が高いかも??
  * 敵の speed が低い序盤は 自分の speed を上げるより敵の speed を下げるほうが効果が高い
    * sp6 と sp1 では goblin 行動と移動だと ramza 6回 に goblin 1回行動
    * sp6 と sp1 では goblin 待機だと ramza 5回 or 4回に goblin 1回行動
    * sp3 と sp1 では goblin 待機だと ramza x回 or x回に goblin 1回行動

* grinding
  * ラムザ エール 4回で Speed 10/ゴブリン Speed 5
  * sp10 と sp5 では goblin 待機だと ramza 2回 or 1回に goblin 1回行動
  * ラムザ エール 15回で Speed 18/ゴブリン Speed 6
  * sp18 と sp6 では goblin 待機だと ramza 3回 or 2回に goblin 1回行動

* 改善案
  * Speed Break をクリスタル継承すると稼ぎ不要
  * Frog だと ハイト差 2 でも安全地帯となる

* 改善案
  * learn Exp(200jp) instead of Level(350jp) and Height(250jp)
  * it can reduce 400jp to gain
  * so, Ramza needs 1950 jp

* grinding
    Priest    , Lv5, 1100JP, need 40 times action
    Oracle    , Lv4,  700JP, need 20 times action
    Wizard    , Lv5, 1100JP, need 40 times action
    Time mage , Lv4,  700JP, need 20 times action
    Calculator, Lvx, xxxxJP, 2350JP

* learn
  * Priest - Holy
     * Should NOT learn Holy here, but after ch4-Murond
  * Wizard - Bolt3, Death, Flare, Counter Magic, Magic Attack UP
     * use jp scroll glith, Ice -> Ice2
  * Time mage - Quick(900jp), Demi2(550jp), MP Switch(400jp), Teleport(600jp)
     * use jp scroll glitch, stop -> quick
     * use jp scroll glitch, reflec -> slowja
     * use jp scroll glitch, dontmove -> slowja (re-open menu needed)
  * Calculator - All except Exp(2350jp)
     * Gained Exp UP(350jp) is not nedded

* JP-glitch
  * Chemist
     * use jp scroll glitch, Eye drop -> Hi-potion
     * use jp scroll glitch, 乙女のキッス -> Ether
  * Mediator
    * 勧誘 -> ほめる (メニュー開き必要)
    * 商談 -> 悪口   (メニュー開き不要)

* job change
  * Wizard

* set ability
  * math
  * mp switch
  * magic attack up
  * teleport は付けない (Wiegraf 戦での移動で遅くなるから)

* Ramza's level
  * 算術士の JP稼ぎが終了時点で lv21 が目安
  * ch2 Golgorand の前までに lv23 必須. lv23 Priest + Green Beret = speed 9

* Formation
  * ユニット一覧ではメニューを閉じないとユニット切り替えできない
    メニューを閉じて開き直す分、最低でも 3f 遅くなる
  * ユニット切り替えは、先にユニットを切り替えてユニット一覧に戻った方が早い
  * 先にユニットを切り替えてメニューに戻るより、そのユニットでメニューに戻り
    Item/Ability/Change Job/ を選択後に、ユニットを切り替えるとさらに早いかも
  * →→←← と押すことで skill windows の表示が早くなる??

  * holy を覚えるための経過 frame = 167f


ch1-Sweegy
----------
* Ramza Lv25, speed 7, MA 11
* speed 7 の敵に先制されるので CT5 Flare
* 敵Lv は ramaza と同じなので Bolt3 ではなく Flare が必要
* 改善案
  * CT5 Death の方が早い
  * 敵移動中に L2 押したほうがカメラ移動が減るかも

* Redpanther
  * Lv19 speed 7
  * Lv20 speed 7
  * Lv21 speed 7
* Black Goblin
  * Lv20 speed 6
  * Lv21 speed 7
* Bom
  * Lv21 speed 6
* Goblin
  * Lv21 speed 6


ch1-Dorter
----------
* CT3 Bolt3

ch1-Sand Rat
------------
* CT3 Bolt3

* After battle, Buy Thunder rod in Gariland to increase Bolt3
  * Thunder rod は ch2 ゴーグのスラム街で戦利品でもらえる
  * もしそれまで damage が十分ならここで買う必要はなし

ch1-Thieves Fort
----------------
* 初期配置を左上にすると視点移動なく戦闘終了
* Height 3 Bolt3
* hits another 2 enemies as well.

ch1-Lenalia
-----------
* Lv4 Bolt3
* Ramza が Lv20 なら hit

ch1-Windmill
------------
* Height 5 Bolt3
* 移動したほうがカメラ移動が減るかも

ch1-Zeakden
-----------
* Height 4 Bolt3
* Lv5 Bolt3 is faster, if Ramza is not Lv20 or Lv25


ch1-save time at the end of ch1
---------------
* 利用する者される者の表示が消えた直後のタイム
* 1:13:44 in TAS
* 1:12:08 in 30 segment TA (save time 1:11:08 の約1分後とみなす)
* 1:18:14 in Claude RTA
* 1:35:20 in さぼてん RTA



ch2-Dorter
----------
* Before battle, change Gafgarion's job Chemist to remove equipment and reduce speed to 6
* Thief Lv11 speed 7
* Thief Lv9  speed 7
* Thief に先制される
* L2
* CT5 Bolt3

* Ramza Lv25, speed 7, MA 11
* Ramza 初期配置 右1上1 in TA, この位置だと投石が届かない??
* Ramza 一番左上 in RTA, この位置だと投石が届かない??
* speed 7 の Theif には基本技をセットしていないか投石を覚えていない方が早い??
* 密漁バグを使うなら、このシーフが密漁を覚えているのが条件
	* 覚えているだけでなく、セットしているのがベター
	* 水門の攻略のために鎧を盗むもあるとベターかも
* 密漁を覚えている敵シーフを勧誘する

ch2-Araguay
-----------
* CT3 Bolt3

* ユニット9体分の effect
* Bolt2 2926 - 1820 = 1106
* Bolt3 2889 - 1820 = 1069
* Ice   3137 - 1820 = 1317
* Ice2  3517 - 1820 = 1697

* 無事なようだなのセリフ
* Bolt2 3254f
* Bolt3 3217f
* Ice   3255f (boco 生存でセリフ skip)
* Ice2  3635f (boco 生存でセリフ skip)

* Bolt3 が一番早い 約40f
* Bolt2 と Ice はエフェクトとセリフ skip が相殺される



ch2-Zirekile Falls
------------------
* Delita Lv11, speed 7
* Delita が先制する
* L2
* Delita が 北斗骨砕打(Crus Punch) を覚えていない(30%??)、または 無双稲妻突き を覚えていると
  1 ターン目で Gafgarion を倒すので、その後の会話が一切発生しない
* Delita が 1ターン目で Gafgarion を倒せば CT3 Death で終了
* Gafgarion は装備解除なので HP は少ない

* 改善案
	* Delita が gaf と knight の 2体を clitical で K.O

ch2-Zaland
----------
* Mustadio Lv10, speed 7
* Mustadio が先制する
* L2
* CT3 Bolt3

* After battle
  * Ovelia, remove all equipments
  * Ramza, equip Traiangle Hat and Wizard Robe by best fit's.
  * Mustadio, change job Chemist to reduce speed to 6
* Ramza Lv26, speed 7, MA 14

ch2-Barius Hill
---------------
* CT3 Bolt3

ch2-Zigolis Swamp
----------
* Uribo は早いので出ないように
* CT3 Bolt3

ch2-Goug
-----------
* Mustadio Lv12, speed 7
* L2
* Thief Lv15, speed 7
* Thief Lv13, speed 7
* CT5 Bolt3

* Mustadio は Engineer に戻っている. speed 7 となる
* speed 7 Thieves に、先に動かれるので、Mustadio のリアクションアビリティを発動させないように
* Mustadio が don't move か don't act を成功させた方が早い. 敵は必ず両方行動するため
* 移動より攻撃のほうがエフェクトが短いきがするので don't move is better??
* 戦利品で Thunder rod


ch2-Warjilis
------------
* ここでは何も買わない. Barius Valley の後に戻ってきて買う
* Before Barius Valley, Buy Green Beret
* 魔道士のマント(MA+1)を買うかどうか
  * --> Queklain が Bolt3 x2 で倒せるなら必要
      そうでなければ必要ない
      Bolt3 ではなく Flare を使うようになるのと
      3章冒頭で Magic Gauntlet(MA+2) を買うため


ch2-Barius Valley
-----------------
* CT3 Bolt3
* Agrias には Bolt3 をガードしてもらう
* Agrias は Death 無効っぽいので Death でもよいが Bolt3 の方が早い

* 改善案
  * ここで 魔術師の杖 が shop に追加される
  * 白魔道士にチェンジしてから 一度 Warjilis に戻って買い物
  * Green Beret(speed +1), 魔術師の杖(MA+1), 魔道士のマント(MA+1) in Fitting room
  * Ramza Lv26, speed 9, MA 12
  * MA 12 だと Golgrand と Lionel (outside) が Bolt3 で倒せる
  * Flare と Bolt3 は 120f 差. 敵が 15体なので 15 x 120f = 1800f
  * Barius Valley と Warjilis の往復や shop のロスは xxf
  * バリアスの谷の後にウォージリスに戻って買い物する方が早くなると思います



ch2-Golgorand
-------------
* Gafgarion Lv17, speed 8

* ch2 Golgorand の前までに lv23 必須. lv23 Priest + Green Beret = speed 9
* Change job Priest, Equip Green Beret for speed 9
* Priest になって MA が下がるので CT Bolt3 でダメージが足りなければ Flare
* Ramza Lv26, speed 9, MA 10
* CT3 Flare


ch2-Lionel (outside)
---------------
* CT3 Flare


ch2-Lionel (inside)
---------------
* Queklain Lv20, HP 511, speed 9

* 後ろに配置して敵を手前に誘導させる。その方が敵の歩数が短そう
* Queklain に先制される. Sleep is bad, but Death Sentence is good.
* L2
* Height Prime Demi2/Height Prime Demi2
* Height Prime の方が Lv5 より 2f 早い
* Bolt3 は MA12 でも 180-190 のダメージ. MA を上げるより Demi2 が better??
* Wizard , Thunder rod, 装備で MA15 にすると Holy が 490 ダメージ
  Queklain が lower HP なら一撃

ch3
---
* Buy Wizard stuff (MA+1) and Magic Gauntlet (MA+2) at fitting room
* Ramza Lv26, speed 9, MA 13

ch3-Goland
----------
* Olan Lv18, speed 9
* highest speed 9

* Olan に先制される
* L2
* CT3 Flare

* Olan は、星天停止の方が、辞書攻撃より早い
* Olan は、辞書攻撃で critical を出すと、ノックバックして倒せるので
  Flare のターゲットが一つ減る

* 改善案
	* Olan 行動前に
		* Olan にゴクウの棒(イノセン) or イノセン or シェル で reduce damage
		* or
		* Olan に haste or slow or stop or 説法で CT をずらす
		* CT5 Bolt3

ch3-Lesalia
-----------
* Zalmo Lv24, HP 248, speed 7
* highest speed 7

* Lv4 Flare
* hits an Knight as well.
* 削ればいいので Bolt2 でもダメージ足りるかも


ch3-Orbonne 2nd Floor
-----------
* highest speed 7

* CT3 Flare
* 編成画面を抜けるときに敵の相性が決定
* 竜騎士は相性が悪いと Flare 一撃で倒せない


ch3-Orbonne 3rd Floor
-----------
* Izlude Lv26, HP 342, speed 8
* highest speed 8

* remove Green Beret for speed 8
* 初期配置を 2マス後ろ
* Izlude が 移動するので Height 3 Flare


ch3-Orbonne 1st Floor
-----------
* Wiegraf Lv27, HP 425, speed 10
* highest speed 10

* Equip Green Beret for speed 9
* Wiegraf には先制される
* Height 5 Flare


ch3-Grog
--------
* highest speed 8
* weather: rain , but an chemist has Rubber Shoes

* CT3 Flare

* 改善案
	* CT5 Ice3
	* or
	* K.O chemist in advance, CT5 Bolt3


ch3-Yardow
----------
* highest speed 9
* Ninja Lv26 speed 9
* Ninja Lv25 speed 9
* Ninja Lv24 speed 9
* Ninja には先制される. Rafa が倒されないように調整
  * R1, when 2nd Ninja moves
  * L1, when 3rd Ninja moves
* Height prime Flare

* Rafa equips Elf's mant (魔法回避25%)
  * 算術で Height を取得しない場合は Rafa は回避が必要

* Ready から忍者が先制して Ramza 「おまえは...」まで
  * 479890 - 478122 = 1768f
  * Ramza も対象になるが CT4/CT5 の方が早そう

* After battle, Change job to Wizard
* Buy Wizard Rod (MA+2), Sprint Shoes (SP+1) in fitting room for speed 9
* <del>Buy also 108 Gems here or get from Malark at end of ch3</del>
* 108 gems は無くてもよい. 108 gems の代わりに Magic Gauntlet で OK
* Ramza speed 9, MA 15

ch3-Yuguo
---------
* highest speed 8
* CT3 Flare


ch3-Riovanes (outside)
------------
* highest speed 8
* 編成画面閉じるときに敵の相性が決定
* CT3 Flare

ch3-Riovanes (inside)
------------
* highest speed 10
* Wiegraf Lv28, HP 381, speed 10
* Move and Height prime flare. (Wiegraf)

* highest speed 8
* Velius Lv31, HP 1131, speed 8
* Lv prime Demi2 x2 (Velius)
* hits an enemy as well
* Demi2 x4 より Flare x3 の方が早い
  * ダメージが足りれば Flare --> Demi2 としたほうがよいかも

ch3-Riovanes (rooftop)
------------
* highest speed 9
* Elmdor Lv33, HP 387, speed 9?? 10??
* Celia  Lv29, HP 359, speed 8
* Lede   Lv28, HP 334, speed 8
* Elmdor には先制される
* Height prime Flare. hit only Lede.


ch4
---

ch4-Doguola
------------
* リオファネス城からドグーラ峠までのエンカウント率は 5/10
* highest speed 7
* CT3 Flare

ch4-Bervenia
------------
* highest speed 9
* Meliadoul Lv35, HP 343, speed 8
* Ninja Lv31, speed 9
* 忍者に先制されるので何もさせないようにする
* Lv 5 Flare
* Ramza が Lv25 or Lv30 になっていない方が早い

ch4-Finath
----------
* highest speed depends on Ramza's Level.
* 赤チョコボやうりぼうは Lv29 前後だと speed 9 の可能性がある
* speed 9 の敵が出現しないように
* CT3 Bolt3

ch4-Zeltennia
-------------
* highest speed 7
* Zalmo Lv35, HP 323, speed 7
* Lv5 Flare
* Ramza と Delita が Lv25 or Lv30 になっていない方が早い


ch4-Bed Dsert
-------------
* highest speed 11
* Balk Lv35, HP 377, speed 11
  * innate Magic Defend UP

* 108 gems は無くてもよい. 108 gems の代わりに Magic Gauntlet で OK
* Equip Magic Gauntlet from Sprint Shoes
* Set Counter Magic from MP Switch
* Ramza Lv30 speed 8, MA 17
* CT prime flare. Flare is enough to kill, since MA is 17.
* ブリザドとブリザラと発動するが、ブリザドのほうがエフェクトが短い


ch4-Besra North Wall
---------
* Equip Sprint Shoes
* **NOT** Set MP Switch
* ability のセットはここではしない
* Ramza Lv30 speed 9, MA 15

* Select North Wall, since there is a Ninja who has speed 9 at the south wall.
* 北か南かの選択で敵の相性が決定

* highest speed 8
* CT3 Flare


ch4-Sluice
----------
* Job change to Squire
* Set Time Magic
* Best fit for Move+1 (Red Shoes)
* Ramza Lv30 speed 7, MA 8, move 5

* highest speed 9

* 戦闘開始から Ramza のターンまで敵8人が行動する
  Testrun では何フレームかかったか計測すること

* PlanA
  * Ramza
    * squire, time magic, teleport, speed 10?
  * General1
    * squire, trhow stone, teleport, speed 10?
  * General2
    * squire, trhow stone, teleport, speed 10?
  * turn1
    * general1 moves and knockback knight
    * general2 moves and knockback knight
    * ramza moves and cast quick
    * quick invoked, then ramza moves


* PlanB
  * Ramza
    * squire, trhow stone, teleport, cirital quick, speed 10?
  * General
    * squire, trhow stone, teleport, speed 10?
  * turn1
    * ramza moves and knockback knight
    * general moves and knockback knight
    * enemy wizard
    * enemy archer x2
    * enemy knight attacks ramza, 156 damage
    * ramza's critical quick invoked
    * ramza moves and cast quick
    * rest of enemies can act??
    * quick invoked, then ramza moves




* RTA 動画では
  * Ramza speed 12, move 4. auto-haste. 見習い戦士
  * Ramza は初期配置, ラヴィアンを 左1 上2
  * Orlandu 加入後は 3人の speed を 12

* TA 動画では
  * Change job of Squire.
  * Set ability of Time Magic
  * Set Teleport
  * MP Switch は付け直さない( Counter Magic のまま)
  * Best fit's equipment (最強装備)
  * Equip Red shoes, if needed. 最強装備後 Red shoes に変更
  * Ramza speed 7, move 5.
  * Ramza 初期配置 右1 上1

* Wizard は時魔法等の行動をさせない
  * Quick を使う場合はヘイストをさせない
  * Quick を使わない場合は敵のヘイストを自分も受ける

* 改善案1
	* Time Mage を 1人出撃させて、Ramza と Time Mage が Critical Quic (瀕死クイック) で短縮する
		1. Time Mage: move and throw stone, then knock back
		1. Ramza: attack Time Mage or cast Quic to Time Mage
		1. Time Mage: re-action Critical Quic, then move and throw stone, then knock back
		1. Enemy: attack Ramza
		1. Ramza: re-action Critical Quic, then move
	* この方法だと Ramza は時魔法使わなくてよい??
	* Ramza の装備は、HP低く、move は高く

* 改善案2
	* Time Mage を 2人出撃させて、テレポ and 投石
		1. Time Mage: move and throw stone then knock back
		1. Ramza: move and cast Quic to myself
		1. Time Mage: move and throw stone then knock back
		1. Ramza: Quic enchanged, then  move

* 改善案3
	* Time Mage, Thief の 2人出撃させて、Critical Quic, テレポ and 投石
		1. Time Mage: move and throw stone then knock back
		1. Thief: attack Ramza
		1. Ramza: re-action Critical Quic, then move and attack attack Time Mage
		1. Time Mage: re-action Critical Quic, then move and throw stone, then knock back
		1. Ramza: move

* 改善案4
	* Thief を 1人出撃させて、Critical Quic
		1. Thief: attack (or steel armor) Ramza
		1. Ramza: re-action Critical Quic, then move and throw stone, then knock back
		1. Ramza: move and (Quic or 装備変更)
		1. Ramza: re-action Critical Quic, then move and (Quic or 装備変更)
		1. Ramza: re-action Critical Quic, then throw stone and move



* Orlandu status
  * Orlandu Lv27 以上かつ Lightning Stab を覚えている. Lv29 だと PA +1 なのでベター
  * エルムドア戦で Move+1 があるとよいので  Move+1 or rest of JP is higher than 200JP

* Bethla to Zarghidas
  * Encounter 6/10 = 3/10 ベッド砂漠 + 3/10 フィナス河


ch4-Zarghidas
-------------
* Make use of item duplication glitch to get a second Excalibur.
* Buy Aegis Shield(MA+1), Flash hat(MA+1, Speed+1) for Ramza
* Buy Twist Headband(PA+2), Power Sleeve(PA+2) for Orlandu

* Formation
* Ramza equip Excalibur, Wizard Robe(MA+2), Magic Gauntlet(MA+2)
* Set Math Skill, MP Switch
* Remove Teleport
	* ラムザはもう歩くことはないので Teleport 解除は必要ない

* Ramza, Lv30, speed 8, MA 13, Excalibur (speed 12)
* Orlandu, Lv30, speed 8, PA 17, Excalibur (speed 12)

* TA 動画では
  * shop
  * dupe Excalibur
  * buy aegis shield for Ramza
  * buy twist headband, power sleeve for Orlandu
  * formation
  * equip Excalibur, Holy Miter, Wizard Robe, Magic Gauntlet for Ramza
  * set Math Skill, MP Switch, remove Teleport
  * Ramza speed 8, MA 13


ch4-Germinas
------------
* CT3 Death

* Ramza 初期配置, Orlandu 初期配置 左1
* 2部隊編成なので全員 squad 1 に出すことで squad 2 の編成画面をスキップさせる

* TA 動画では
  * Ramza 初期配置, Orlandu 初期配置 左2

* Note
  * Flare 629877 - 631321 = 1444f
  * Death 629877 - 630841 =  964f (-480f)

ch4-Poeskas
-----------
* CT3 Flare

* 死者にデスは効かないのでフレア


ch4-Limberry (outside)
------------
* Celia  Lv38, HP 413, speed 9
* Lede   Lv37, HP 393, speed 9

* Ramza 初期配置 上1, Orlandu 初期配置 左4
* Orlandu Lightning Stab
  * Flare より Lightning Stab の方が早い
  * Lightning Stab の方が Ramza の Lv に依存しない
  * 移動中に L2. zoom out した方が Lightning Stab は 15f 早い
  * 戦闘後の会話でカメラ移動があるが zoom out と zoom in で経過frameは同じ

* RTA では
  * Ramza が Lv32 なので Level prime flare で Ledy を倒す
  * Apanda の Level はランダムなので prime にならないように調整する

* TA では
  * Ramza 初期配置 上1, Orlandu 初期配置 左4
  * こうすることで Orlandu が Ramza より早く行動する
  * Orlandu 剣技


ch4-Limberry (inside)
------------
* before battle, learn and set Move+1 for Orlandu

* Elmdor Lv41, HP 583, speed 10
* Orlandu Lightning Stab **critical**

* Ramza 初期配置, Orlandu 初期配置 左2
* Orlandu Lightning Stab
  * エルムドアのみを狙う場合は Move+1 が必要
  * ダメージが足りないので Critical が必要
  * Ramza の場合は Flare ではダメージが足りないので Holy が必要

* RTA では
  * Ramza speed 11, MA 14, 黒魔道士
  * Level prime flare.

* TA では
  * Ramza 初期配置, Orlandu 出ない
  * Level prime holy.


ch4-Zarela
----------
* Zarela Lv44, HP 1171, speed 11

* Ramza 初期配置, Orlandu 初期配置 上1
  * この配置だとカメラの回転が少なくなる

* Height prime Demi2
* hits an enemy as well
* Orlandu Lightning Stab **critical**

* RTA では
  * Ramza speed 12, MA 12, 黒魔道士
  * Ramza 初期配置, Orlandu ラムザの上1, ラヴィアン ラムザの 上1 左1
  * この配置だとカメラの回転が少なくなる
  * Height prime Demi2
  * Orlandu が剣技. 足りない場合は ラヴィアン.

* TA では
  * Ramza 初期配置, Orlandu Ramza 左1
  * この配置だとカメラ回転が増える. Ramza の 上1 がよい
  * Height prime Demi2
  * Orlandu が剣技(Lightning Stab) critical.

* Limberry to Igros
  * Encounter 5/10 = 3/10 ドルボダル湿原 + 2/10 スウィージの森
  * ただしずれるので絶対ではない
* Limberry to Dorter
  * 恐らく 3/10 =  3/10 ドルボダル湿原 + 0/10 ゼイレキレの滝 + 0/10 アラグアイの森
  * ただしずれるので絶対ではない
* Dorter to Igros
  * 恐らく 3/10 =  3/10 スウィージの森 + 0/10 マンダリア平原
  * ただしずれるので絶対ではない


ch4-Adramelk
------------
* Dycedarg Lv43, HP  462, speed 9
* Adramelk Lv46, HP 1525, speed 10

* Ramza 初期配置 の左1, Orlandu 初期配置
* Orlandu Lightning Stab **critical**
* Height 4 Demi2
* Height 4 Demi2

* Dycedarg 戦で L2 を押すと 31f 早い
* Adramelk 戦ではズームが元に戻っている. もう一度 L2 押す方が loss になるかも

* Reflect Mail を使うならここで買う

* RTA では
  * Ramza 初期配置 の左1, Orlandu 初期配置
  * この配置で Orlandu が先に行動する
  * この配置で Orlandu が ダイスダークに届く
  * (Lightning Stab があれば配置変更の必要はない??)
  * Orlandu, 移動して剣技
  * Ramza, 移動しないで Height 4 Bolt3.
  * 移動すると会話イベントが発生する
  * Height 4 Demi2
  * Orlandu が 6マス以上離れる (喪失を喰らわないため)
  * Height 5 Demi2

* TA では
  * Buy Thief Hat(SP+2) for Ramza at Gariland
  * Buy Flash Hat(SP+1) for Orlandu at Gariland

  * Ramza,   Lv28, speed 10, MA 12, Excalibur (speed 15)
  * Orlandu, Lv27, speed  9, PA 14, Excalibur (speed 13.5)

  * Ramza 初期配置, Orlandu Ramza 左1
  * Ramza CT3 Holy
  * Orlandu, 移動して Lightning stab

  * Height 4 Demi2
  * Orlandu 待機
  * Height 4 Demi2


ch4-Gariland
------------
* Buy Thief Hat(SP+2) for Orlandu in fitting room at Gariland
* Buy Thief Hat(SP+2), Reflect Ring

* Ramza,   Lv31, speed  8, MA 13, Excalibur (speed 12)
* Orlandu, Lv31, speed 10, PA 15, Excalibur (speed 15)
* Orlandu で 2体倒すために Orlandu の speed を Ramza より大きくする



ch4-Murond (outside)
----------
* Ramza 初期配置  (1st Squad)
* Orlandu 初期配置 下1 (2nd Squad)
* Orlandu Lightning Stab
* CT3 Death

* zoom out test
  * Orlandu 待機時に L2 なし
     * ramza ct3 death 697841
     * ramza arrowed   698655
  * Orlandu 待機時に L2 なし, ramza ct3 death時に L2 あり
     * ramza ct3 death 697841
     * ramza arrowed   698671
  * Orlandu 待機時に L2 あり
     * ramza ct3 death 697866
     * ramza arrowed   698677


* after battle,
* Orlandu equip Twist Headband(PA+2) from Thief Hat(SP+2)
* Orlandu, Lv31, speed 8, PA 17, Excalibur (speed 12)


* TA では
  * Ramza equip Holy Miter(MA+1) from Thief Hat
  * Ramza, Lv29, speed 8, MA 13, Excalibur (speed 12)
  * Ramza 初期配置  (1st Squad)
  * Orlandu 初期配置 下1 (2nd Squad)

  * Orlandu Lightning Stab to kill 2 Mediators
  * Ramza CT3 flare
  * Orlandu で 2体倒す方が Flare で 2体倒すより早いのかも

* RTA では
  * CT3 Flare

* Second Squad に Orlandu を配置するとロスだが、Orlandu で 2体倒す方が早いのかもしれない
	* 未検証??


ch4-Murond (inside)
----------
* Volmalf  Lv46, HP 520, speed 9
* Rofal    Lv45, HP 419, speed 9
* Kletian  Lv44, HP 361, speed 8

* Ramza 初期配置から 上1, Orlandu 初期配置から 左2
* Orlandu move up 4th and L2, then Lightning Stab
* L2 zoomout した方が 2f 早い


* RTA では
  * Ramza 初期配置から 上1, Orlandu 初期配置から 左2
  * この配置で Orlandu が先に行動する
  * Orlandu 剣技

* TA では
  * Orlandu equip Twist Headband(PA+2)
  * Orlandu, Lv28, speed 8, PA 16, Excalibur (speed 12)
  * Ramza 初期配置から 上1, Orlandu 初期配置から 左2
  * この配置で Orlandu が先に行動する
  * Orlandu Lightning stab



ch4-Murond (Zalbag)
----------
* Zalbag Lv54, HP 562, speed 11

* Ramza 初期配置から 上1, Orlandu 初期配置から 左2
* Orlandu move up 4th and L2, then Lightning Stab **critical**


* RTA では
  * Orlandu, speed 10, PA 15
  * PA を上げて 1撃で倒す
  * Ramza 初期配置, Orlandu Ramza の左1
  * Ramza の speed を 8以下にすれば、会話を防げるかも??
  * Zalbag は Ramza に マジックルーイン
  * Orlandu が charge 中に剣技

* TA では
  * Ramza 初期配置 上1, Orlandu 初期配置 左2
  * Orlandu 剣技 (Lightning Stab) critical
  * Orlandu が Zalbag より先に行動するので会話を skip 可能



ch4-Orbonne (UBS 4)
-----------
* ラスダン. ここからは戻れない
* 検証用に Reflect Ring と Reflect Mail を買う

* Ramza,   Lv32, speed  8, MA 14, Excalibur (speed 12)
* Ramza 初期配置 左1, Orlandu Ramza の左3
* Ramza の Death や Flare で一掃できる乱数がなかったので一人残す
  Orlandu で残った一人を倒す
* CT3 Death

* RTA では
  * Ramza speed 11, MA 14, Wizard
  * Orlandu speed 11, PA 12
  * Ramza 初期配置 左1, Orlandu Ramza の左2
  * カメラの回転を減らすため
  * CT5 flare
  * Ramza の Lv35 になっていれば speed が 1上昇する

* TA では
  * Ramza 初期配置 左1, Orlandu 出撃しない
  * カメラの回転を減らすため
  * CT3 holy


ch4-Orbonne (Rofal)
-----------
* Rofal Lv54, HP 509, speed 10
* Rofal は Defense UP, Auto-Protect(with Save-The-Queen) 所有なので Orlandu の剣技の damage は 200以下
* Ramza の Flare では 390 damage, Holy では 520 damage. Holy しかない??

* Ramza 初期配置, Orlandu 出撃しない
* Lv 3 Holy

* RTA では
  * speed 11 に先制される
  * Lv 3 flare

* TA では
  * Ramza 初期配置, Orlandu 出撃しない
  * Lv 3 Holy
  * Ramza の Lv30 なので hit する (Excalibur が 聖吸収)



ch4-Murond (Kletian)
----------
* before battle,
* Orlandu equip Thief Hat(SP+2) from Twist Headband(PA+2)
* Orlandu, Lv32, speed 10, PA 15, Excalibur (speed 15)
* Orlandu Lightning Stab **critical**

* Ramza 初期配置 左1, Orlandu Ramza の左3

* Kletian Lv54, HP 420, speed 10
* Ninja   Lv53, HP 311, speed 13
* Ninja   Lv51, HP 308, speed 13
* Ninja に先制される
* Orlandu Lightning Stab  **critical**

* RTA では
  * Ramza 初期配置, Orlandu Ramza の上1, ラヴィアン Orlandu の上1
  * 敵忍者のターンで、R2 で視点変更するとカメラ移動がない??
  * Orlandu の剣技

* TA では
  * Ramza 初期配置 上1, Orlandu 初期配置
  * この配置で Orlandu が先に行動する
  * Orlandu の剣技


ch4-Murond (Balk)
----------
* before battle,
* Orlandu equip Twist Headband(PA+2) from Thief Hat(SP+2)
* Orlandu, Lv33, speed 8, PA 17, Excalibur (speed 12)

* Balk Lv55, HP 488, speed 13

* Ramza 初期配置 上1, Orlandu 初期配置 左1
* Balk に先制される. 味方近くに誘導, L2
* Balk はブラストガンより狙撃が早い
* Orlandu Lightning Stab **critical**

* Balk
  * Blast gun (Bolt2??) 395f = 2436f - 2041f
  * Snipe               280f = 2319f - 2039f
  * Snipe L2 zoom       265f = 2304f - 2039f  (15f faster)
  * L2 がある、なしでスクロール距離が変わるためか、乱数がずれ結果が変わる


* RTA では
  * Ramza 初期配置, Orlandu Ramza の左1, ラヴィアン Ramza の左2, 上2
  * Balk を味方近くに誘導
  * Ramza が移動して Lv 5 flare or Lv 5 Bolt3
  * Ramza が移動しないと会話が発生する
  * Orlandu で剣技

* TA では
  * Ramza 初期配置, Orlandu Ramza の左1
  * Balk を味方近くに誘導. Ramza に銃攻撃
  * Ramza が移動して CT prime holy
  * Orlandu で剣技


ch4-Murond (Hashmalum)
-----------
* Hashmalum Lv59, HP 1450, speed 13

* before battle,
* Ramza は今後 Demi2 しか使わないので speed 重視装備
* Ramza equip Thief Hat, Sprint Shoes, White Robe
* Orlandu, Equip Thief Hat, Reflect Ring

* Ramza,   Lv32, speed 10, MA  9, Excalibur (speed 15)
* Orlandu, Lv33, speed 10, PA 12, Excalibur (speed 15)

* Ramza 初期配置, Orlandu 出撃しない
  * Orlandu が出撃して Ramza の近くにいると高確率で呪縛(stop)を使ってくる
		* Speed 10 以上が 2人以上いると呪縛が優先される模様
  * 呪文を使わせたほうが effect が短いため Orlandu は出撃しない
  * 2撃目が Demi2 か charge中に Orlandu の critical かどっちが早いかは微妙
  * 調整のしやすさは Demi2

* Q:Hashmalum は Speed 13, 対して Ramza and Orlandu は Speed 15 なのに、
    なぜ Hashmalum が先制するのか?
* Q:Orlandu が Speed 14 以上、かつ、ダメージが 725 以上なら
    Ramza と Orlandu で先制できるのではないか?

* Lv prime Demi2
* Hashmalum が魔法
* Hashmalum の chage 中に Level prime Demi2

* RTA では
  * Ramza 初期配置, Orlandu Ramza の左2, 上1, ラヴィアン Orlandu の上1
  * Hashmalum に次元魔法 を使わせる (Orlandu に呪縛が来ないようにするため)
  * Ramza, Lv prime Demi2
  * Orlandu 剣技

* TA では
  * Ramza equip Thief Hat, Sprint Shoes
  * Ramza, speed 11, MA 11, Excalibur (speed 16.5)
  * Ramza 初期配置, Orlandu 出撃しない
  * Lv prime Demi2
  * Hashmalum が魔法
  * Hashmalum の charge 中に Level prime Demi2



ch4-Murond (Altima)
-----------
* Altima   Lv56, HP 1391, speed 9
* 第二形態 Lv66, HP 3281, speed 12

* before battle,
* Ramza, Learn Demi, Short Charge, MP回復移動
* Ramza, Set Time Magic, Short Charge, MP回復移動
  * Lv33 だと White Robe だと MP97, Demi2(MP50), Demi(MP24) = MP98 で MP1 足りない
  * 光のローブやローブオブロードが必要
  * 今回は MP回復移動で乗り切った
  * 算術は Refect 不可なので時魔法をセット

* Ramza,   Lv33, speed 10, MA  9, Excalibur (speed 15)
* Orlandu, Lv33, speed 10, PA 12, Excalibur (speed 15)


* Ramza 初期配置 上1, Orlandu 初期配置 左1
* READY 表示 (762196f)
* Orlandu 移動
* Ramza Demi2, reflect
  * 時魔法は reaction が発動するので発動させないよう調整
  * face up, 239f = 8114f - 7875f
  * 算術だと reaction が発動しないらしい??
* 第二形態, HP 3281, Lv66, speed 11
* Ramza Demi, reflect
* Ramza move, Demi, reflect. ここで L2 押さないほうが 2f 早かった. zoom in が影響??


* 第一形態は HP 2000未満なのでグラビガ 2発で終了
* 第二形態は HP 4000未満なのでグラビデ 4発で終了
* ラスボス弱すぎ

* Congratulations! 表示 (770518f)
* elapsed 8322f = 139sec


  * READY 表示 (825251f, 手動テスト)
  * Ramza 初期配置 左1, Orlandu 初期配置
  * Orlandu 移動
  * Ramza Demi2, reflect
  * 第二形態, HP 3281, Lv66, speed 11
  * Ramza Demi, reflect
  * Ramza Demi, reflect
  * Congratulations! 表示 (835093f, 手動テスト)
  * elapsed 9842f = 164sec


* RTA では
  * Ramza 初期配置, Orlandu Ramza の左1, ラヴィアン Orlandu の左3
  * Altima, HP 1391, Lv56, speed 9

  * READY 表示 4:15:35
  * Ramza height prime holy
  * Alma マバリア
  * Orlandu 移動 + 剣技
  * 第二形態, HP 3281, Lv66, speed 11
  * Ramza height prime slow
  * ラヴィアン 銃撃
  * Alma マバリア to Ramza
  * Orlandu 剣技
  * Ramza height prime demi2
  * Ramza height prime demi2
  * Orlandu 剣技
  * Congratulations! 表示 4:18:46
  * elapsed 191sec

* TA では
  * Orlandu equip Ragnarok
  * Orlandu, speed 8, PA 17
  * Ramza 初期配置, Orlandu Ramza の左1
  * Altima, HP 1370, Lv56, speed 9

  * READY 表示 2:22
  * Ramza height prime demi2
  * Alma の行動時に L2
  * 移動 + Ramza height prime demi2
  * 第二形態
  * Orlandu 移動 + 剣技
  * Orlnandu の行動時に L2
  * Ramza height prime demi2
  * Altima が Ramza を攻撃
  * Ramza height prime demi2
  * Orlandu 待機
  * Ramza height prime demi2
  * Congratulations! 表示 4:51
  * elapsed 149sec


Ending
------
### Take1
* Last key frame = 803365f
* "The end"      = 803979f (after 30f, 0x1FFE88 = 0x801FFF48) = 3:43:19
* movie end      = 805007
* rerecord-count = 59430

### Take2 (improve last boss)
* 359f shorter
* Last key frame = 803006f
* "The end"      = 803620f (after 30f, 0x1FFE88 = 0x801FFF48) = 3:43:13
* movie end      = 804647
* rerecord-count = 60253


Mathable by Lv
--------------
* ch1-Lenalia, Lv4 Bolt3, Miluda
* ch1-Zeakden, Height 4 Bolt3 or Lv5 Bolt3, Algus
* ch2-Lionel (inside),  Height Prime Demi2 or Lv5 Demi2, Queklain
* ch3-Lesalia,  Lv4 Flare, hits an Knight as well. Zalmo
* ch3-Riovanes (inside), Lv prime Demi2 x2, hits an enemy as well. Velius
* ch4-Bervenia, Lv 5 Flare, Meliadoul
* ch4-Zeltennia, Lv 5 Flare, Zalmo
* ch4-Orbonne (Rolfal), Level 3 Holy
* ch4-Murond (Hashmalum), Lv prime Demi2

Mathable by  Height
-------------------
* ch1-Thieves Fort, Height 3 Bolt3, hits another 2 enemies as well. Miluda
* ch1-Windmill, Height 5 Bolt3, Wiegraf
* ch1-Zeakden, Height 4 Bolt3 or Lv5 Bolt3, Algus
* ch2-Lionel (inside),  Height Prime Demi2 or Lv5 Demi2, Queklain
* ch3-Orbonne 3rd Floor, Izlude が 移動するので Height 3 Flare. Izlude
* ch3-Orbonne 1st Floor, Height 5 Flare, Wiegraf
* ch3-Yardow,  Height prime Flare, **Defeat All**
* ch3-Riovanes (inside), Move and Height prime flare. Wiegraf
* ch3-Riovanes (rooftop), Height prime Flare. Selia/Lede
* ch4-Zarela, Height prime Demi2, hits an enemy as well. Zarela
* ch4-Adramelk, Height 4 Demi2. Adramelk
* ch4-Murond (Altima), Height prime Demi2


Job Level
---------
| Job Lv | Job point |
| 1      |  100-199  |
| 2      |  200-299  |
| 3      |  400-499  |
| 4      |  700-799  |
| 5      | 1100-1199 |
| 6      | 1600-1699 |
| 7      | 2200-2299 |
| 8      | 3000-2099 |


CT
----
* 3の倍数の tick(clock) で CT100 になる場合、敵の CT は 3の倍数となる
* SP7, SP9, SP12 が相当

SP  tick
 1 * 100 = 100
 2 * 50 = 100
 3 * 34 = 102
 4 * 25 = 100
 5 * 20 = 100
 6 * 17 = 102
 7 * 15 = 105
 8 * 13 = 104
 9 * 12 = 108
10 * 10 = 100  Demi2, Death
11 * 10 = 110
12 *  9 = 108  Demi2 US??
13 *  8 = 104
15 *  7 = 105  Bolt3, Flare
17 *  6 = 102  Demi
20 *  5 = 100  Bolt2, Demi2-short, Toad
25 *  4 = 100  Quick, Bolt
30 *  4 = 120  Bolt3-short, Flare-short
34 *  3 = 102  Demi-short
40 *  3 = 120  Bolt2-short
50 *  2 = 100  Haste, Quick-short, Bolt-short


Frame counts of casting spell
-----------------------------
* Bolt3 が Bolt2 より 約4f早い

* Bolt3  2105 - 1813 = 292f
* Bolt3  6033 - 5738 = 295f
* Bolt2  2624 - 2326 = 298f
* Bolt   1583 - 1269 = 314f
* Ice    5645 - 5319 = 326f
* Ice    6553 - 6227 = 326f
* Demi2  2634 - 2302 = 332f
* Demi2  6089 - 5750 = 339f
* Ice3   6869 - 6526 = 343f
* Ice3   5719 - 5373 = 346f
* Death  6106 - 5744 = 362f
* Death  2414 - 2049 = 365f
* Ice2   6747 - 6378 = 369f
* Ice2   5700 - 5330 = 370f
* Flare  6160 - 5746 = 414f
* Flare  2639 - 2224 = 415f
* Holy   6875 - 6243 = 632f
* Holy   2840 - 2206 = 634f
* Holy   6375 - 5736 = 639f
* 碑封印(ブレイク) ???f


* Lightning Stab
	455 - 240 = 215f
	766 - 550 = 216f
	939 - 730 = 209f

* Yell           284f
* Accumulate      64f
* Goblin wait    110f

* Invitation     300f  (15f は画面スクロール分かも)
* Persuade(CT0)  300f  (15f は画面スクロール分かも)
* Preach(fa+4)   285f
* Critical Quick 250f

* Goblin Tackle  miss
    2622 - 2295 = 327f
    3777 - 3475 = 302f
    1573 - 1246 = 327f

* Goblin Tackle  hit
    1638 - 1311 = 327f
    3804 - 3477 = 327f

* 2nd Goblin takes about 1000f frames for his moves.
    1st turn  7039 - 6785 = 254f
    2nd turn  7541 - 7301 = 240f
    3rd turn  8452 - 8215 = 237f
    4th turn  9359 - 9108 = 251f
    total                   982f

* 17f (約20f) to move 1 grid (約20f)
* LvUp effect は 24f??
* LvUp effect は 40f?? Lv effect 中は 0x1FFE88 が 0x0137 になる


* normal HP damage と guard と critical の effect frame 数は同じ
* guard は 数 frame 遅いときがある??



Holy Knight / White Knight
--------------------------
Stasis Sword    不動無明剣        Stop                100
Split Punch     乱命割殺打        Doom (死の宣告)     400
Crush Punch     北斗骨砕打        K.O. (デス)         500
Lightning Stab  無双稲妻突き      Silence             700
Holy Explosion  聖光爆裂破        Confuse             800


Zodiac sign
-----------
0x00 = 白羊 = Aries
0x10 = 金牛 = Taurus
0x20 = 双子 = Gemini
0x30 = 巨蟹 = Cancer
0x40 = 獅子 = Leo
0x50 = 処女 = Virgo
0x60 = 天秤 = Libra
0x70 = 天蝎 = Scorpio
0x80 = 人馬 = Sagittarius
0x90 = 磨羯 = Capricorn
0xA0 = 宝瓶 = Aquarius
0xB0 = 双魚 = Pisces
0xC0 = 蛇遣 = Serpentarius (neutral to all signs)

* Ramza 0x90
  * very good    0x30         female Cancer
  * good         0x10, 0x50   Taurus, Virgo
  * bad          0x00, 0x60   Aries, Scorpio
  * very bad     0x30         male Cancer

Magic Formula
-------------
* Bolt
  * Damage = [CFa/100 * TFa/100 * MA * 14]
* Bolt2
  * Damage = [CFa/100 * TFa/100 * MA * 18]
* Bolt3
  * Damage = [CFa/100 * TFa/100 * MA * 24]
* Death
  * Success% = [CFa/100 * TFa/100 * (MA + 100)]
  * If target is immune to Dead status, then success% = 0.
* Flare
  * Damage = [CFa/100 * TFa/100 * MA * 46]
* Holy
  * Damage = [CFa/100 * TFa/100 * MA * 50]
* Demi
  * Success% = [CFa/100 * TFa/100 * (MA + 190)]
* Demi2
  * Success% = [CFa/100 * TFa/100 * (MA + 120)]



Lucavi
--------
| name     |Lv|HP        |MP        |SP|PA|MA|
|----------|--|----------|----------|--|--|--|
| Queklain |20| 480～ 511|  343～368| 9|10| 8|
| Velius   |31|1041～1131|  253～285| 8|12～14|11～13|
| Zarela   |44|1098～1171|  687～736|11|15|10|
| Adramelk |46|1405～1525|  386～435|10|14～16|10～12|
| Hashmalum|59|1359～1450|  764～818|13|17|11|
| Altima   |56|1281～1391|  432～485| 9|13～15|13～15|
| Altima2  |66|3022～3281|  405～455|12|16～19|15～18|


Play Movie
----------
* FFT NA Any% PB - 3:58:26
* http://www.twitch.tv/claude/c/5920172

* FFT RTA - 4:20:54 Part 1
* http://www.twitch.tv/tideruglia/c/6013890


Encounter research of random battle
----------------------------------
* lua で検証できたこと
  * frame数が同じなら乱数を変えてもエンカウントする・しないの判定は変化しない
  * エンカウントはフレーム単位で 3連続で発生, 7連続でなしの周期を繰り返している
  * frame数が同じなら乱数を変えても出撃する・しないの判定は変化しない
    * ただし編成画面で異なる行動をとると、到着時刻が同じでも敵編成が異なることがまれにある
  * ゲーム内の milsec, sec, min, hour を書き換えれば結果が変わる

* disassemble
  * milsec等を参照する関数としては sub_80125A04 (US) sub_801254F8(JPv1.1)が関係してそう
  * sub_8008E540(US) から sub_80125A04(US) と下記の sub_8008F08C(US) が call されている
  * この辺がエンカ判定と出撃判定と(出撃ユニットのステータス決定)だと推測される
  * http://ffhacktics.com/wiki/00125a04_-_00125cf8
  * http://ffhacktics.com/wiki/Update_Seed_and_Calculate_Party_Data
    * 拠点に到着するとゲームタイムを元に seed が更新される
    * new seed = msec * 101 + sec * 10 + min + hour
    * seed が更新されてから、ユニットの出撃判定とステータス決定が実行される
    * よって到着時刻が同じなら、その後の乱数変化は常に同じになる


* エンカウントするかどうかの判定
  * http://ffhacktics.com/wiki/0008f08c_-_0008f280
  * 0008f08c - 0008f280
    * 戻り値が 0 なら無し. 1 ならエンカウント
    * 恐らく拠点ごとにエンカウント率が設定されている
    * 拠点情報は 0x80096A64 (US) から 0x18 each
      拠点情報 の 3byte 目がエンカウント率と思われる
    * Mandalia の場合 0x80096A64 (US) + (0x18 * 2) + 0x3 = 0x80096A94 に
      0x1E (30% chance) が格納されている
    * 乱数call (jal 0x0002230c) が 2ヶ所にあるがどちらも最終的に
      0-99 の範囲に変換している
    * 1回目の乱数 call でエンカウント判定を行う
      rand(0..99) < 拠点のエンカウント率 (30)  のときにエンカウント発生
    * コード上は乱数が影響しているように見えるが lua の検証結果と矛盾する
      --> seed がゲームタイムを元に更新されるので、到着時刻が同じなら乱数も同じとなる
      --> 3連続発生、7連続なしの周期を繰り返しているが
          これについては、乱数生成自体に周期があるとしか考えられない
   * 周期の調査結果
      --> Egg が存在しない場合 seed 更新後の最初の乱数生成はエンカウント判定となる
      --> 1 frame ずつずらすと seed は 101 毎に増える
      --> seed が 101 ずつ増えると エンカウント発生率は 90 ずつ増える
      --> (見た目上は 1f ずれると 10 ずつ減少するように見える)
      --> よって 3連続発生、7連続なしの周期が生じる
      --> 60進数なので msec が 0 のときは 4連続発生、7連続なし、のようになる


* 出撃するかどうかの判定
  * http://ffhacktics.com/wiki/Big_ENTD_unit_loading_routine
  * 0017F8A0 - 0017FBE8: Big ENTD unit loading routine
    <code>
    0017fa2c: 0c0088c3 jal 0x0002230c
    0017fa30: 00000000 nop
    0017fa34: 30420001 andi r2,r2,0x0001               r2 = 1 or 0. which means 50% chance to exist.
    0017fa38: 1040000a beq r2,r0,0x0017fa64            branch if unit can exist?
    </code>
    * コード上は乱数が影響しているように見えるが lua の検証結果と矛盾する
      --> seed がゲームタイムを元に更新されるので、到着時刻が同じなら乱数も同じとなる
    * ただし編成画面で異なる行動をとると、到着時刻が同じでも編成が異なることがまれにある
      --> こちらについては lag frame でずれることがある
    * lag frame でずれることがあるのを利用したいが、意図的に発生させる方法は不明


* バトル中の Critical Hit で乱数が 6個飛ぶ模様. 飛ぶのは行動決定後
* 戦士斡旋所(Soldier office) で 乱数が 28個飛ぶ. 飛ぶのは Male Soldier を選択後


Knockback research
------------------
* Knockback はステータスではない. Effect の一種
* Knockback の計算は下記
  * http://ffhacktics.com/wiki/Knockback_Calculation
  * Battle Unit の offset +0x05 に Immortal(0x04) のフラグを持つと Knockback しない
  * また offset +0x05 が 0x03 の値でも Knockback しない

* ちなみに Immortal はボス耐性フラグのようなもので
  Knockback 以外でも Poach, Malboro, の耐性がある模様
* さらに Immortal は以下のステータス耐性を持つ
  * Crystal, Dead, Undead, Petrify, Invite, Confusion, Blood Suck.
  * Treasure, Chicken, Frog, Charm, Sleep, Don't Act, Death Sentence

* Knockback の発生率
  * Criticak Hit とそれ以外で発生率が異なる
  * Critical Hit ルーチン
    * http://ffhacktics.com/wiki/Critical_Hit_Calculation
  * Knockback ルーチン
    * http://ffhacktics.com/wiki/Damage_and_Knockback_Routine_(Dash,_tackle,_throw_stone)
    * attacker の Br が高く、target の Br が低いほど Knockback 発生率が高くなる


Research
--------
* ただし編成画面で異なる行動をとると、到着時刻が同じでも敵編成が異なることがまれにある
  * 出撃画面で lag が発生する frame がずれてしまうのが原因の模様
  * なぜ lag frame がずれるのかは不明
  * 傾向として、編成画面で一定 frame が経過すると lag frame がずれる
  * 編成画面では 0x801C16E6 や 0x801C1706 辺りにデータをストアしていて
    この辺のアドレスの書き換え回数や値を見れば、法則がつかめるかもしれない



ROM hack
--------
* No Random Battles
  WLDCORE.BIN
  0x2770A change 0x40 to 0x00

* Main Data Locations:
  * RAM -> File
  *   -0xF800 -> SCUS
  *  -0x67000 -> Battle.bin
  *  -0x67000 -> WLDCORE.bin
  *  -0xE0000 -> World.bin
  * -0x1BF000 -> REQUIRE.OUT
  * -0x1BF000 -> EQUIP.OUT
  * -0x1BF000 -> ATTACK.OUT

