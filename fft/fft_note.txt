FFT note
========

RNG
----
* BIOS によって initial RNG が異なる
  --> 間違い
  * どの ROM も seed = 1 で初期化される
  * JP v1.1 では 474f に seed = 1 で初期化される
  * 0f 時の rng値は単にゴミと思われる
* SCPH7502.BIN では 14f 待つと 199/199
* SCPH1000.BIN では  9f 待つと 199/199
* SCPH1001.BIN では ??
* ちなみに SCPH7502 だと戦闘時にフリーズする
  * ガフガリオンの最初のターンでフリーズ現象は tasvideos にも報告あり
  * BIOS の変更や disable coord check を checked で改善するらしい

FurShop glitch
-------------
* furshop glitch takes 1474f
* 1638f is fastest at soft rest
* soft rest しても rng seed の初期化は発生しない
* furshop inventory 0x80056818 (JPv1.1)
* furshop inventory 0x80059494 (US)
* 編成画面が表示されたら soft reset でOK. ダーラボンのセリフは表示前で OK.


Ramza 初期ステータス
--------------------
* new game 押下後 Arazlam のセリフスキップ後にステータスが決定される
* High starting
  * Squire と Chemist 以外のジョブの JP も高いバランス型が理想
  * Must  : Squire JP, Chemist JP
  * Should: Wizard JP, Priest JP, Calculator JP
  * May   : Time mage JP, Oracle JP


ch1-Orbonne
-----
* オーボンヌ内の最後の ovelia のセリフで敵星座が決定

* turn1
  * change option
    *  2.カーソルのリピート速度  ->速い
         --> TAS では必要なし??
    *  4.指カーソルの速度  ->すごく速い
         --> TAS では必要なし??
    *  5.メッセージの表示速度  ->速い
    *  6.ナビゲーションメッセージの有無  -> OFF
    *  7.アビリティ名の表示  -> OFF
    *  8.効果メッセージの表示  -> OFF
    *  9.経験値Jp取得の表示  -> OFF
    * 11.ジョブ別装備付加アイテムの表示  -> OFF
    * 12.ジョブチェンジ時の最強装備  -> OFF
  * 4マス進む
  * 敵弓使いの中に「磨褐宮」のユニットが居た場合は
    最優先で攻撃すること

  * カメラ移動があると数フレーム遅くなる
  * カメラ移動で敵や味方の行動開始フレームがずれるので、乱数調整が可能
  * 戦闘後の最後の Ramza のセリフで味方ステータスが決定


* testrun_tas = 19406f,  5:23, "Let go of me" said Ovelia
* optimze_tas = 16619f,  4:37, "Let go of me" said Ovelia
* youtube_tas =       ,  4:25, "Let go of me" said Ovelia

* Orbonne 戦闘終了の会話は 手動と text_skip.lua とで同じ結果
* text_skip.lua を信用してもよさそう


Lv1 Chemist 初期ステータス
--------------------------
* High starting
  * Chemist JP
  * Faith
  * Chemist JP 190以上, Faith 70以上が理想
  * Gariland で稼いで Lv2 になるのが理想
  * Female の方が MA が +1 高い


Lv1 Squire 初期ステータス
------------------------
* High starting
  * Squire JP
  * 味方見習い戦士で残り JP が 100以上
  * Gariland で稼いで 取得 Jp UP を覚えるため
  * その後クリスタル化して継承
  * もしくは Mandalia で取得 Jp UP を覚えている敵を探す
  * Gariland の敵は Lv1 のため取得Jp UP は覚えていない


ch1-Gariland
-----
* セーブ画面の入力後に敵星座が決定
  * 屋根の上に来る Female Squire と相性良

* 配置

* turn1
  * カメラ移動があると数フレーム遅くなる
  * 敵移動中にカメラ移動する


* Ramza
  * Squire JP 250 for Gained JP UP(250) or Yell(200)
    * 実際は 300JP 貯まらない
  * Chemist JP 200 for Wizard

* Chemist
  * Chemist JP 200 for Wizard
  * Lv2 (recomend because of boosting MP)

* after battle, formation
  * world map に出たら x で説明をキャンセル
  * Ramza, learn Yell 200JP
  * Chemist
    * job change:  Wizard
    * learn:  Bolt 50JP, MagicAttackUP 400JP
    * set: MagicAttackUP
  * Chemist 以外のユニット除名

* 改善案
  * 配置
    * Ramza は左下に配置
  * turn1
    * Ramza 右の屋根の上の敵を critical で一撃
  * turn2
    * Ramza 5歩でぎりぎり届く位置に敵が来てたら、critical で一撃
    * この敵は投石を覚えていない方が早い
  * 味方 Squire に取得Jp UP 覚えさせるため 250jp 稼ぐ
  * Gariland の敵は Lv1 のため取得Jp UP は覚えていない
  * L2 押したほうがカメラ移動が減るかも


ch1-Mandalia
-----
* Ramza
  * ためる 300jpと取得JpUP 250jp の 550JP を稼ぐ
  * ex1) エールを覚えてエールで稼ぐ
  * ex2) 取得JP UP を覚えて普通の行動で稼ぐ
  * エールの方が全体で見ると早いらしい

* 配置
  * Ramza と黒魔道士
  * redpanther が 2撃で倒せるよう敵HP調整
    * 相性良 (24 damage となる)
    * 相性普通 (20 damage) and HP40以下
    * 稼ぎ終了後に Ramza の Lv が nn になっている想定

* turn1
  * Ramza, Yell
  * 黒魔道士, Bolt, 敵1体倒す

* turn2
  * Ramza, Yell
  * 黒魔道士, Bolt, アルガスを巻き込んで敵3体倒す

* turn3
  * redpanther だけになるので稼ぐ
  * Wizard, Bolt で Delita 巻き込んで自殺

* turnN
  * algus の死体の奥の安全地帯で稼ぐ


* after battle, formation
  * Ramza
    * job change:  Priest
    * learn:  Accumulates 300JP, Gained JP UP 250JP
    * set: guts, Gained JP UP

* 改善案
  * Ramza ためる 300jp 稼ぐ
  * 取得Jp UP を敵か味方からクリスタル継承
  * 敵シーフのみ Lv2 なので取得Jp UP を覚えている可能性がある
  * Lv3 の敵が出ないので ためる(300jp)を覚えている敵はいない
  * L2 押したほうがカメラ移動が減るかも


ch1-random
-----
* 改善案
  * 敵1体のみ編成を 1000f 程度探索
  * 2体目が Ramza に近づくまで 4 turn かかり、それが約 1000f
  * よって 1000f 待った方が結果的に早くなる
  * エンカ率 3/10 * 敵1体のみ 1/256 = 3/2560 = 約1/853
  * L2 押したほうがカメラ移動が減るかも

* ボツ案
  * ガッツではなく話術はどうか
    * ためるより遅いが、ドーピング, Sleep, CT reset 等が可能
    * 話術は Yell と同じエフェクトの長さ 約284f
    * モンスターはまじゅう語をセットしないと効かないので、実質ドーピングのみ
    * まじゅう語をセットすると取得JP UP がセットできないのでボツ

* ボツ案
  * Time mage と Calculator は味方 Wizard を出す
    * calcurator のときに 味方 Time mage を出せれば haste をかけれる
  * 2体目のゴブリンは Wizard が倒す
  * Time mage の稼ぎは Haste (100jp) 覚えると早いのでは?
    * 魔法をたくさん覚えると menu がスクロールしてしまい loop 選択できなくなる
  * Oracle の稼ぎは不変不動 (100jp) を覚えると早いのでは?
    * 不変不動はすぐ切れる
  * ゴブリンは Lv14 で speed 6 になる模様
  * Time mage のときに goblin が Lv13 以下になるように調整が必要
    * Keep Ramza's Lv under 14
  * Ramza speed 12, goblin speed 5 のとき, Ramza 2回行動, goblin 1回待機 となる

* 改善案
  * Yell (200JP) より Speed Break (250JP) の方が効果が高いかも??
  * 敵の speed が低い序盤は 自分の speed を上げるより敵の speed を下げるほうが効果が高い
    * sp6 と sp1 では goblin 行動と移動だと ramza 6回 に goblin 1回行動
    * sp6 と sp1 では goblin 待機だと ramza 5回 or 4回に goblin 1回行動
    * sp3 と sp1 では goblin 待機だと ramza x回 or x回に goblin 1回行動

* griding
  * ラムザ エール 4回で Speed 10/ゴブリン Speed 5
  * sp10 と sp5 では goblin 待機だと ramza 2回 or 1回に goblin 1回行動
  * ラムザ エール 15回で Speed 18/ゴブリン Speed 6
  * sp18 と sp6 では goblin 待機だと ramza 3回 or 2回に goblin 1回行動


* grinding
    Priest    , Lv5, 1100JP, need 40 times action
    Oracle    , Lv4,  700JP, need 20 times action
    Wizard    , Lv5, 1100JP, need 40 times action
    Time mage , Lv4,  700JP, need 20 times action
    Calculator, Lvx, xxxxJP, 2350JP

* learn
  * Priest - Holy
  * Wizard - Bolt3, Death, Flare, Counter Magic, Magic Attack UP
    use jp scroll glith, Ice -> Ice2
  * Time mage - Quick(900jp), Demi2(550jp), MP Switch(400jp), Teleport(600jp)
    use jp scroll glitch, stop -> quick, reflec -> slowja
  * Calculator - All except Exp(2350jp)
    Gained Exp UP(350jp) is not nedded

* job change
  * Wizard

* set ability
  * math
  * mp switch
  * magic attack up
  * teleport は付けない (Wiegraf 戦での移動で遅くなるから)

* Ramza's level
  * 算術士の JP稼ぎが終了時点で lv21 が目安
  * ch2 Golgorand の前までに lv23 必須. lv23 Priest + Green Beret = speed 9

* holy を覚えるための経過 frame = 167f


ch1-Sweegy
----------
* Ramza Lv25, speed 7, MA 11
* speed 7 の敵に先制されるので CT5 Flare
* 敵Lv は ramaza と同じなので Bolt3 ではなく Flare が必要
* 改善案
  * CT5 Death の方が早い
  * L2 押したほうがカメラ移動が減るかも

ch1-Dorter
----------
* CT3 Bolt3

ch1-Sand Rat
------------
* CT3 Bolt3

* After battle, Buy Thunder rod in Gariland to increase Bolt3
  * Thunder rod は ch2 ゴーグのスラム街で戦利品でもらえる
  * もしそれまで damage が十分ならここで買う必要はなし

ch1-Thieves Fort
----------------
* 初期配置を左上にすると視点移動なく戦闘終了
* Height 3 Bolt3
* hits another 2 enemies as well.

ch1-Lenalia
-----------
* Lv4 Bolt3
* Ramza が Lv20 なら hit

ch1-Windmill
------------
* Height 5 Bolt3
* 移動したほうがカメラ移動が減るかも

ch1-Zeakden
-----------
* Height 4 Bolt3
* Lv5 Bolt3 is fater, if Ramza is not Lv20 or Lv25


ch1-save time at the end of ch1
---------------
* 利用する者される者の表示が消えた直後のタイム
* 1:13:44 in TAS
* 1:12:08 in 30 segment TA (save time 1:11:08 の約1分後とみなす)
* 1:18:14 in Claude RTA
* 1:35:20 in さぼてん RTA



ch2-Dorter
----------
* Before battle, change Gafgarion's job Chemist to remove equipment and reduce speed to 6
* Thief Lv11 speed 7
* Thief Lv9  speed 7
* Thief に先制される
* L2
* CT5 Bolt3

* Ramza Lv25, speed 7, MA 11
* Ramza 初期配置 右1上1 in TA, この位置だと投石が届かない??
* Ramza 一番左上 in RTA, この位置だと投石が届かない??
* speed 7 の Theif には基本技をセットしていないか投石を覚えていない方が早い??
* 密漁バグを使うなら、このシーフが密漁を覚えているのが条件
* 密漁を覚えている敵シーフを勧誘する

ch2-Araguay
-----------
* CT3 Bolt3

ch2-Zirekile Falls
------------------
* Delita Lv11, speed 7
* Delita が先制する
* L2
* Delita が 北斗骨砕打(Crus Punch) を覚えていない(30%??)、または 無双稲妻突き を覚えていると
  1 ターン目で Gafgarion を倒すので、その後の会話が一切発生しない
* Delita が 1ターン目で Gafgarion を倒せば CT3 Death で終了
* Gafgarion は装備解除なので HP は少ない


ch2-Zaland
----------
* Mustadio Lv10, speed 7
* Mustadio が先制する
* L2
* CT3 Bolt3

* After battle
  * Ovelia, remove all equipments
  * Ramza, equip Traiangle Hat and Wizard Robe by best fit's.
  * Mustadio, change job Chemist to reduce speed to 6
* Ramza Lv26, speed 7, MA 14

ch2-Barius Hill
---------------
* CT3 Bolt3

ch2-Zigolis Swamp
----------
* Uribo は早いので出ないように
* CT3 Bolt3

ch2-Goug
-----------
* Mustadio Lv12, speed 7
* L2
* Thief Lv15, speed 7
* Thief Lv13, speed 7
* CT5 Bolt3

* Mustadio は Engineer に戻っている. speed 7 となる
* speed 7 Thieves に、先に動かれるので、Mustadio のリアクションアビリティを発動させないように
* Mustadio が don't move か don't act を成功させた方が早い. 敵は必ず両方行動するため
* 移動より攻撃のほうがエフェクトが短いきがするので don't move is better??
* 戦利品で Thunder rod


ch2-Warjilis
------------
* ここでは何も買わない. Barius Valley の後に戻ってきて買う
* Before Barius Valley, Buy Green Beret
* 魔道士のマント(MA+1)を買うかどうか
  * --> Queklain が Bolt3 x2 で倒せるなら必要
      そうでなければ必要ない
      Bolt3 ではなく Flare を使うようになるのと
      3章冒頭で Magic Gauntlet(MA+2) を買うため


ch2-Barius Valley
-----------------
* CT3 Bolt3
* Agrias には Bolt3 をガードしてもらう
* Agrias は Death 無効っぽいので Death でもよいが Bolt3 の方が早い

* 改善案
  * ここで 魔術師の杖 が shop に追加される
  * 白魔道士にチェンジしてから 一度 Warjilis に戻って買い物
  * Green Beret(speed +1), 魔術師の杖(MA+1), 魔道士のマント(MA+1) in Fitting room
  * Ramza Lv26, speed 9, MA 12
  * MA 12 だと Golgrand と Lionel (outside) が Bolt3 で倒せる
  * Flare と Bolt3 は 120f 差. 敵が 15体なので 15 x 120f = 1800f
  * Barius Valley と Warjilis の往復や shop のロスは xxf
  * バリアスの谷の後にウォージリスに戻って買い物する方が早くなると思います



ch2-Golgorand
-------------
* Gafgarion Lv17, speed 8

* ch2 Golgorand の前までに lv23 必須. lv23 Priest + Green Beret = speed 9
* Change job Priest, Equip Green Beret for speed 9
* Priest になって MA が下がるので CT Bolt3 でダメージが足りなければ Flare
* Ramza Lv26, speed 9, MA 10
* CT3 Flare


ch2-Lionel (outside)
---------------
* CT3 Flare


ch2-Lionel (inside)
---------------
* Queklain Lv20, HP 511, speed 9

* 後ろに配置して敵を手前に誘導させる。その方が敵の歩数が短そう
* Queklain に先制される. Sleep is bad, but Death Sentence is good.
* L2
* Height Prime Demi2/Height Prime Demi2
* Height Prime の方が Lv5 より 2f 早い
* Bolt3 は MA12 でも 180-190 のダメージ. MA を上げるより Demi2 が better??
* Wizard , Thunder rod, 装備で MA15 にすると Holy が 490 ダメージ
  Queklain が lower HP なら一撃

ch3
---
* Buy Wizard stuff (MA+1) and Magic Gauntlet (MA+2) at fitting room
* Ramza Lv26, speed 9, MA 13

ch3-Goland
----------
* Olan Lv18, speed 9
* max speed 9

* Olan に先制される
* L2
* CT3 Flare

* Olan は、星天停止の方が、辞書攻撃より早い
* Olan は、辞書攻撃で critical を出すと、ノックバックして倒せるので
  Flare のターゲットが一つ減る


ch3-Lesalia
-----------
* Zalmo Lv24, HP 248, speed 7
* max speed 7

* Lv4 Flare
* hits an Knight as well.


ch3-Orbonne 2nd Floor
-----------
* max speed 7

* CT3 Flare
* 編成画面を抜けるときに敵の相性が決定
* 竜騎士は相性が悪いと Flare 一撃で倒せない


ch3-Orbonne 3rd Floor
-----------
* Izlude Lv26, HP 342, speed 8
* max speed 8

* remove Green Beret for speed 8
* 初期配置を 2マス後ろ
* Izlude が 移動するので Height 3 Flare


ch3-Orbonne 1st Floor
-----------
* Wiegraf Lv27, HP 425, speed 10
* max speed 10

* Equip Green Beret for speed 9
* Wiegraf には先制される
* Height 5 Flare


ch3-Grog
--------
* max speed 8
* weather: rain , but some enemy has Rubber Shoes

* CT3 Flare


ch3-Yardow
----------
* max speed 9
* Ninja Lv26 speed 9
* Ninja Lv25 speed 9
* Ninja Lv24 speed 9
* Ninja には先制される. Rafa が倒されないように調整
* Height prime Flare

* After battle, Change job to Wizard
* Buy Wizard Rod (MA+2), Sprint Shoes (SP+1) in fitting room for speed 9
* <del>Buy also 108 Gems here or get from Malark at end of ch3</del>
* 108 gems は無くてもよい. 108 gems の代わりに Magic Gauntlet で OK
* Ramza speed 9, MA 15


ch3-Riovanes (outside)
------------
* 編成画面閉じるときに敵の相性が決定
* CT3 Flare

ch3-Riovanes (inside)
------------
* Wiegraf Lv28, HP 381, speed 10
* Move and Height prime flare. (Wiegraf)

* Velius Lv31, HP 1131, speed 8
* Lv prime Demi2 x2 (Velius)
* hits an enemy as well

ch3-Riovanes (rooftop)
------------
* Elmdor Lv33, HP 387, speed 9?? 10??
* Celia  Lv29, HP 359, speed 8
* Lede   Lv28, HP 334, speed 8
* Elmdor には先制される
* Height prime Flare


ch4
---

ch4-Doguola
------------
* リオファネス城からドグーラ峠までのエンカウント率は 5/10
* CT3 Flare

ch4-Bervenia
------------
* Meliadoul Lv35, HP 343, speed 8
* Ninja Lv31, speed 9
* 忍者に先制されるので何もさせないようにする
* Lv 5 Flare
* Ramza が Lv25 or Lv30 になっていない方が早い

ch4-Finath
----------
* speed 9 の敵が出現しないように
* CT3 Bolt3

ch4-Zeltennia
------------
* Zalmo Lv35, HP 323, speed 7
* Lv5 Flare
* Ramza と Delita が Lv25 or Lv30 になっていない方が早い


ch4-Bed Dsert
-------------
* Balk Lv35, HP 377, speed 11

* 108 gems は無くてもよい. 108 gems の代わりに Magic Gauntlet で OK
* Equip Magic Gauntlet from Sprint Shoes
* Set Counter Magic from MP Switch
* Ramza speed 8, MA 17
* CT prime flare. Flare is enough to kill, since MA is 17.
* ブリザドとブリザラと発動するが、ブリザドのほうがエフェクトが短い


ch4-Besra North Wall
---------
* Equip Sprint Shoes
* **NOT** Set MP Switch
* ability のセットはここではしない
* Select North Wall, since there are enemies who has speed 9 at the south wall.
* Ramza speed 9, MA 15
* 北か南かの選択で敵の相性が決定
* CT3 Flare


ch4-Sluice
----------
* RTA 動画では
  * Ramza speed 12, move 4. auto-haste. 見習い戦士
  * Ramza は初期配置, ラヴィアンを 左1 上2
  * Orlandu 加入後は 3人の speed を 12

* TA 動画では
  * Change job of Squire.
  * Set ability of Time Magic
  * Set Teleport
  * MP Switch は付け直さない( Counter Magic のまま)
  * Best fit's equipment (最強装備)
  * Equip Red shoes, if needed. 最強装備後 Red shoes に変更
  * Ramza speed 7, move 5.
  * Ramza 初期配置 右1 上1

* Wizard は時魔法等の行動をさせない
  * Quick を使う場合はヘイストをさせない
  * Quick を使わない場合は敵のヘイストを自分も受ける
* Orlandu status
  * Orlandu Lv27 以上かつ Lightning Stab を覚えている. Lv29 だと PA +1 なのでベター
  * エルムドア戦で Move+1 があるとよいので  Move+1 or rest of JP is higher than 200JP

* Encount odds is 6/10 from Bethla to Zarghidas

ch4-Zarghidas
-------------
* Make use of item duplication glich to get a second Excalibur.
* Buy Aegis Shield(MA+1), Flash hat(MA+1, Speed+1) for Ramza
* Buy Twist Headband(PA+2), Power Sleeve(PA+2) for Orlandu

* Formation
* Ramza equip Exbalibur, Wizard Robe(MA+2), Magic Gauntlet(MA+2)
* Set Math Skill, MP Switch
* Remove Teleport

* Ramza, Lv30, speed 8, MA 13, Excalibur (speed 12)
* Orlandu, Lv30, speed 8, PA 17, Excalibur (speed 12)

* TA 動画では
  * shop
  * dupe Excalibur
  * buy aegis shield for Ramza
  * buy twist headband, power sleeve for Orlandu
  * formation
  * equip Excalibur, Holy Miter, Wizard Robe, Magic Gauntlet for Ramza
  * set Math Skill, MP Switch, remove Teleport
  * Ramza speed 8, MA 13


ch4-Germinas
------------
* CT3 Death

* TA 動画では
  * Ramza 初期配置, Orlandu Ramza 左1
  * 2部隊編成なので Orlandu も出す

* Note
  * Flare 629877 - 631321 = 1444f
  * Death 629877 - 630841 =  964f (-480f)

ch4-Poeskas
-----------
* CT3 Flare


ch4-Limberry (outside)
------------
* Celia  Lv38, HP 413, speed 9
* Lede   Lv37, HP 393, speed 9

* Ramza 初期配置 上1, Orlandu 初期配置 左4
* Orlandu Lightning Stab
  * Flare より Lightning Stab の方が早い
  * Lightning Stab の方が Ramza の Lv に依存しない
  * 移動中に L2. zoom out した方が Lightning Stab は 15f 早い
  * 戦闘後の会話でカメラ移動があるが zoom out と zoom in で経過frameは同じ

* RTA では
  * Ramza が Lv32 なので Level prime flare で Ledy を倒す
  * Apanda の Level はランダムなので prime にならないように調整する

* TA では
  * Ramza 初期配置 上1, Orlandu 初期配置 左4
  * こうすることで Orlandu が Ramza より早く行動する
  * Orlandu 剣技


ch4-Limberry (inside)
------------
* before battle, learn and set Move+1 for Orlandu

* Elmdor Lv41, HP 583, speed 10
* Orlandu Lightning Stab **critical**

* Ramza 初期配置, Orlandu 初期配置 左2
* Orlandu Lightning Stab
  * エルムドアのみを狙う場合は Move+1 が必要
  * ダメージが足りないので Critical が必要
  * Ramza の場合は Flare ではダメージが足りないので Holy が必要

* RTA では
  * Ramza speed 11, MA 14, 黒魔道士
  * Level prime flare.

* TA では
  * Ramza 初期配置, Orlandu 出ない
  * Level prime holy.


ch4-Zarela
----------
* Zarela Lv44, HP 1171, speed 11
* Height prime Demi2
* hits an enemy as well
* Orlandu が剣技(Lightning Stab). 足りない場合は critical.

* RTA では
  * Ramza speed 12, MA 12, 黒魔道士
  * Ramza 初期配置, Orlandu ラムザの上1, ラヴィアン ラムザの 上1 左1
  * この配置でカメラの回転 1回少なくなる
  * Height prime Demi2
  * Orlandu が剣技. 足りない場合は ラヴィアン.

* TA では
  * Ramza 初期配置, Orlandu Ramza 左1
  * この配置だとカメラ回転が増える. Ramza の 上1 がよい
  * Height prime Demi2
  * Orlandu が剣技(Lightning Stab) critical.

* Limberry to Igros
  * encount 5/10 = 3/10 ドルボダル湿原 + 2/10 スウィージの森
  * ただしずれるので絶対ではない
* Limberry to Dorter
  * 恐らく 3/10 =  3/10 ドルボダル湿原 + 0/10 ゼイレキレの滝 + 0/10 アラグアイの森
  * ただしずれるので絶対ではない
* Dorter to Igros
  * 恐らく 3/10 =  3/10 スウィージの森 + 0/10 マンダリア平原
  * ただしずれるので絶対ではない


ch4-Adramelk
------------
* Dycedarg Lv43, HP  462, speed 9?? 10??
* Adramelk Lv46, HP 1525, speed 10

* Ramza 初期配置 の左1, Orlandu 初期配置
* Orlandu Lightning Stab **critical**
* Height 4 Demi2
* Height 4 Demi2

* Dycedarg 戦で L2 を押すと 31f 早い
* Adramelk 戦ではズームが元に戻っている. もう一度 L2 押す方が loss になるかも

* Reflect Mail を使うならここで買う

* RTA では
  * Ramza 初期配置 の左1, Orlandu 初期配置
  * この配置で Orlandu が先に行動する
  * この配置で Orlandu が ダイスダークに届く
  * (Lightning Stab があれば配置変更の必要はない??)
  * Orlandu, 移動して剣技
  * Ramza, 移動しないで Height 4 Bolt3.
  * 移動すると会話イベントが発生する
  * Height 4 Demi2
  * Orlandu が 6マス以上離れる (喪失を喰らわないため)
  * Height 5 Demi2

* TA では
  * Buy Thief Hat(SP+2) for Ramza at Gariland
  * Buy Flash Hat(SP+1) for Orlandu at Gariland

  * Ramza,   Lv28, speed 10, MA 12, Excalibur (speed 15)
  * Orlandu, Lv27, speed  9, PA 14, Excalibur (speed 13.5)

  * Ramza 初期配置, Orlandu Ramza 左1
  * Ramza CT3 Holy
  * Orlandu, 移動して Lightning stab

  * Height 4 Demi2
  * Orlandu 待機
  * Height 4 Demi2


ch4-Gariland
------------
* Buy Thief Hat(SP+2) for Orlandu in fitting room at Gariland
* Buy Thief Hat(SP+2), Reflect Ring

* Ramza,   Lv31, speed  8, MA 13, Excalibur (speed 12)
* Orlandu, Lv31, speed 10, PA 15, Excalibur (speed 15)
* Orlandu で 2体倒すために Orlandu の speed を Ramza より大きくする



ch4-Murond (outside)
----------
* Ramza 初期配置  (1st Squad)
* Orlandu 初期配置 下1 (2nd Squad)
* Orlandu Lightning Stab
* CT3 Death

* zoom out test
  * Orlandu 待機時に L2 なし
     * ramza ct3 death 697841
     * ramza arrowed   698655
  * Orlandu 待機時に L2 なし, ramza ct3 death時に L2 あり
     * ramza ct3 death 697841
     * ramza arrowed   698671
  * Orlandu 待機時に L2 あり
     * ramza ct3 death 697866
     * ramza arrowed   698677


* after battle,
* Orlandu equip Twist Headband(PA+2) from Thief Hat(SP+2)
* Orlandu, Lv31, speed 8, PA 17, Excalibur (speed 12)


* TA では
  * Ramza equip Holy Miter(MA+1) from Thief Hat
  * Ramza, Lv29, speed 8, MA 13, Excalibur (speed 12)
  * Ramza 初期配置  (1st Squad)
  * Orlandu 初期配置 下1 (2nd Squad)

  * Orlandu Lightning Stab to kill 2 Mediators
  * Ramza CT3 flare
  * Orlandu で 2体倒す方が Flare で 2体倒すより早いのかも

* RTA では
  * CT3 Flare



ch4-Murond (inside)
----------
* Volmalf  Lv46, HP 520, speed 9
* Rofal    Lv45, HP 419, speed 9
* Kletian  Lv44, HP 361, speed 8

* Ramza 初期配置から 上1, Orlandu 初期配置から 左2
* Orlandu move up 4th and L2, then Lightning Stab
* L2 zoomout した方が 2f 早い


* RTA では
  * Ramza 初期配置から 上1, Orlandu 初期配置から 左2
  * この配置で Orlandu が先に行動する
  * Orlandu 剣技

* TA では
  * Orlandu equip Twist Headband(PA+2)
  * Orlandu, Lv28, speed 8, PA 16, Excalibur (speed 12)
  * Ramza 初期配置から 上1, Orlandu 初期配置から 左2
  * この配置で Orlandu が先に行動する
  * Orlandu Lightning stab



ch4-Murond (Zalbag)
----------
* Zalbag Lv54, HP 562, speed 11

* Ramza 初期配置から 上1, Orlandu 初期配置から 左2
* Orlandu move up 4th and L2, then Lightning Stab **critical**


* RTA では
  * Orlandu, speed 10, PA 15
  * PA を上げて 1撃で倒す
  * Ramza 初期配置, Orlandu Ramza の左1
  * Ramza の speed を 8以下にすれば、会話を防げるかも??
  * Zalbag は Ramza に マジックルーイン
  * Orlandu が charge 中に剣技

* TA では
  * Ramza 初期配置 上1, Orlandu 初期配置 左2
  * Orlandu 剣技 (Lightning Stab) critical
  * Orlandu が Zalbag より先に行動するので会話を skip 可能



ch4-Orbonne (UBS 4)
-----------
* ラスダン. ここからは戻れない
* 検証用に Reflect Ring と Reflect Mail を買う

* Ramza,   Lv32, speed  8, MA 14, Excalibur (speed 12)
* Ramza 初期配置 左1, Orlandu Ramza の左3
* Ramza の Death や Flare で一掃できる乱数がなかったので一人残す
  Orlandu で残った一人を倒す
* CT3 Death

* RTA では
  * Ramza speed 11, MA 14, Wizard
  * Orlandu speed 11, PA 12
  * Ramza 初期配置 左1, Orlandu Ramza の左2
  * カメラの回転を減らすため
  * CT5 flare
  * Ramza の Lv35 になっていれば speed が 1上昇する

* TA では
  * Ramza 初期配置 左1, Orlandu 出撃しない
  * カメラの回転を減らすため
  * CT3 holy


ch4-Orbonne (Rolfal)
-----------
* Rofal Lv54, HP 509, speed 10
* Rofal は Defence UP, auto Protess 所有なので Orlandu の剣技の damage は 200以下
* Ramza の Flare では 390 damage, Holy では 520 damage. Holy しかない??

* Ramza 初期配置, Orlandu 出撃しない
* Lv 3 Holy

* RTA では
  * speed 11 に先制される
  * Lv 3 flare

* TA では
  * Ramza 初期配置, Orlandu 出撃しない
  * Lv 3 Holy
  * Ramza の Lv30 なので hit する (Excalibur が 聖吸収)



ch4-Murond (Kletian)
----------
* before battle,
* Orlandu equip Thief Hat(SP+2) from Twist Headband(PA+2)
* Orlandu, Lv32, speed 10, PA 15, Excalibur (speed 15)
* Orlandu Lightning Stab **critical**


* Kletian Lv54, HP 420, speed 10
* Ninja   Lv53, HP 311, speed 13
* Ninja   Lv51, HP 308, speed 13
* Ninja に先制される
* Orlandu Lightning Stab  **critical**

* RTA では
  * Ramza 初期配置, Orlandu Ramza の上1, ラヴィアン Orlandu の上1
  * 敵忍者のターンで、R2 で視点変更するとカメラ移動がない??
  * Orlandu の剣技

* TA では
  * Ramza 初期配置 上1, Orlandu 初期配置
  * この配置で Orlandu が先に行動する
  * Orlandu の剣技


ch4-Murond (Balk)
----------
* before battle,
* Orlandu equip Twist Headband(PA+2) from Thief Hat(SP+2)
* Orlandu, Lv33, speed 8, PA 17, Excalibur (speed 12)

* Balk Lv55, HP 488, speed 13

* Ramza 初期配置 上1, Orlandu 初期配置 左1
* Balk に先制される. 味方近くに誘導, L2
* Balk はブレイズガンより狙撃が早い
* Orlandu Lightning Stab **critical**

* Balk
  * Braze gun (Bolt2??) 395f = 2436f - 2041f
  * Snipe               280f = 2319f - 2039f
  * Snipe L2 zoom       265f = 2304f - 2039f  (15f faster)
  * L2 がある、なしでスクロール距離が変わるためか、乱数がずれ結果が変わる


* RTA では
  * Ramza 初期配置, Orlandu Ramza の左1, ラヴィアン Ramza の左2, 上2
  * Balk を味方近くに誘導
  * Ramza が移動して Lv 5 flare or Lv 5 Bolt3
  * Ramza が移動しないと会話が発生する
  * Orlandu で剣技

* TA では
  * Ramza 初期配置, Orlandu Ramza の左1
  * Balk を味方近くに誘導. Ramza に銃攻撃
  * Ramza が移動して CT prime holy
  * Orlandu で剣技


ch4-Murond (Hashmalum)
-----------
* Hashmalum Lv59, HP 1450, speed 13

* before battle,
* Ramza は今後 Demi2 しか使わないので speed 重視装備
* Ramza equip Thief Hat, Sprint Shees, White Robe
* Orlandu, Equip Thief Hat, Refrect Ring

* Ramza,   Lv32, speed 10, MA  9, Excalibur (speed 15)
* Orlandu, Lv33, speed 10, PA 12, Excalibur (speed 15)

* Ramza 初期配置, Orlandu 出撃しない
  * Orlandu が出撃して Ramza の近くにいると高確率で呪縛(stop)を使ってくる
  * 呪文を使わせたほうが effect が短いため Orlandu は出撃しない
  * 2撃目が Demi2 か chage中に Orlandu の critical かどっちが早いかは微妙
  * 調整のしやすさは Demi2

* Lv prime Demi2
* Hashmalum が魔法
* Hashmalum の chage 中に Level prime Demi2

* RTA では
  * Ramza 初期配置, Orlandu Ramza の左2, 上1, ラヴィアン Orlandu の上1
  * Hashmalum に次元魔法 を使わせる (Orlandu に呪縛が来ないようにするため)
  * Ramza, Lv prime Demi2
  * Orlandu 剣技

* TA では
  * Ramza equip Thief Hat, Sprint Shoes
  * Ramza, speed 11, MA 11, Excalibur (speed 16.5)
  * Ramza 初期配置, Orlandu 出撃しない
  * Lv prime Demi2
  * Hashmalum が魔法
  * Hashmalum の chage 中に Level prime Demi2



ch4-Murond (Altima)
-----------
* Altima   Lv56, HP 1391, speed 9
* 第二形態 Lv66, HP 3281, speed 12

* before battle,
* Ramza, Learn Demi, Short Charge, MP回復移動
* Ramza, Set Time Magic, Short Charge, MP回復移動
  * Lv33 だと White Robe だと MP97, Demi2(MP50), Demi(MP24) = MP98 で MP1 足りない
  * 光のローブやローブオブロードが必要
  * 今回は MP回復移動で乗り切った

* Ramza,   Lv33, speed 10, MA  9, Excalibur (speed 15)
* Orlandu, Lv33, speed 10, PA 12, Excalibur (speed 15)


* Ramza 初期配置 上1, Orlandu 初期配置 左1
* READY 表示 (762196f)
* Orlandu 移動
* Ramza Demi2, reflect
  * 時魔法は reaction が発動するので発動させないよう調整
  * face up, 239f = 8114f - 7875f
  * 算術だと reaction が発動しないらしい??
* 第二形態, HP 3281, Lv66, speed 11
* Ramza Demi, reflect
* Ramza move, Demi, reflect. ここで L2 押さないほうが 2f 早かった. zoom in が影響??
* Congratulations! 表示 (770518f)
* elapsed 8322f = 139sec


  * READY 表示 (825251f, 手動テスト)
  * Ramza 初期配置 左1, Orlandu 初期配置
  * Orlandu 移動
  * Ramza Demi2, reflect
  * 第二形態, HP 3281, Lv66, speed 11
  * Ramza Demi, reflect
  * Ramza Demi, reflect
  * Congratulations! 表示 (835093f, 手動テスト)
  * elapsed 9842f = 164sec


* RTA では
  * Ramza 初期配置, Orlandu Ramza の左1, ラヴィアン Orlandu の左3
  * Altima, HP 1391, Lv56, speed 9

  * READY 表示 4:15:35
  * Ramza height prime holy
  * Alma マバリア
  * Orlandu 移動 + 剣技
  * 第二形態, HP 3281, Lv66, speed 11
  * Ramza height prime slow
  * ラヴィアン 銃撃
  * Alma マバリア to Ramza
  * Orlandu 剣技
  * Ramza height prime demi2
  * Ramza height prime demi2
  * Orlandu 剣技
  * Congratulations! 表示 4:18:46
  * elapsed 191sec

* TA では
  * Orlandu equip Ragnarok
  * Orlandu, speed 8, PA 17
  * Ramza 初期配置, Orlandu Ramza の左1
  * Altima, HP 1370, Lv56, speed 9

  * READY 表示 2:22
  * Ramza height prime demi2
  * Alma の行動時に L2
  * 移動 + Ramza height prime demi2
  * 第二形態
  * Orlandu 移動 + 剣技
  * Orlnandu の行動時に L2
  * Ramza height prime demi2
  * Altima が Ramza を攻撃
  * Ramza height prime demi2
  * Orlandu 待機
  * Ramza height prime demi2
  * Congratulations! 表示 4:51
  * elapsed 149sec


Ending
------
* Last key frame = 803365f
* "The end"      = 803979f (after 30f, 0x1FFE88 = 0x801FFF48) = 3:43:19
* rerecord-count = 59430


Mathable by Lv
--------------
* ch1-Lenalia, Lv4 Bolt3
* ch1-Zeakden, Height 4 Bolt3 or Lv5 Bolt3
* ch2-Lionel (inside),  Height Prime Demi2 or Lv5 Demi2
* ch3-Lesalia,  Lv4 Flare, hits an Knight as well.
* ch3-Riovanes (inside), Lv prime Demi2 x2 (Velius), hits an enemy as well
* ch4-Bervenia, Lv 5 Flare
* ch4-Zeltennia, Lv 5 Flare
* ch4-Orbonne (Rolfal), Level 3 Holy
* ch4-Murond (Hashmalum), Lv prime Demi2

Mathable by  Height
-------------------
* ch1-Thieves Fort, Height 3 Bolt3, hits another 2 enemies as well.
* ch1-Windmill, Height 5 Bolt3
* ch1-Zeakden, Height 4 Bolt3 or Lv5 Bolt3
* ch2-Lionel (inside),  Height Prime Demi2 or Lv5 Demi2
* ch3-Orbonne 3rd Floor, Izlude が 移動するので Height 3 Flare
* ch3-Orbonne 1st Floor, Height 5 Flare
* ch3-Yardow,  Height prime Flare
* ch3-Riovanes (inside), Move and Height prime flare. (Wiegraf)
* ch3-Riovanes (rooftop), Height prime Flare
* ch4-Zarela, Height prime Demi2, hits an enemy as well
* ch4-Adramelk, Height 4 Demi2
* ch4-Murond (Altima), Height prime Demi2


CT
----
* 3の倍数の tick(clock) で CT100 になる場合、敵の CT は 3の倍数となる
* SP7, SP9, SP12 が相当

SP   tick
 1 * 100 = 100
 2 * 50 = 100
 3 * 34 = 102
 4 * 25 = 100  (Quick)
 5 * 20 = 100
 6 * 17 = 102
 7 * 15 = 105
 8 * 13 = 104
 9 * 12 = 108
10 * 10 = 100  (Demi2, JP??)
11 * 10 = 110
12 *  9 = 108  (Demi2, US??)
13 *  8 = 104
15 *  7 = 105
17 *  6 = 102  (Demi)
20 *  5 = 100  (Demi2, short charge, JP??)
25 *  4 = 100
34 *  3 = 102  (Demi, short charge)
50 *  2 = 100


Frame counts of casting spell
-----------------------------
* Bolt3  6033 - 5738 = 295f
* Demi2  6089 - 5750 = 339f
* Deth   6106 - 5744 = 362f
* Flare  6160 - 5746 = 414f
* Holy   6375 - 5736 = 639f
* Holy   6875 - 6243 = 632f

* Lightning Stab
	455 - 240 = 215f
	766 - 550 = 216f
	939 - 730 = 209f

* Yell           284f
* Accumulate      64f
* Goblin wait    110f

* Invitation     300f  (15f は画面スクロール分かも)
* Persuade(CT0)  300f  (15f は画面スクロール分かも)
* Preach(fa+4)   285f
* Critical Quick 250f

* Goblin Tackle  miss
    2622 - 2295 = 327f
    3777 - 3475 = 302f
    1573 - 1246 = 327f

* Goblin Tackle  hit
    1638 - 1311 = 327f
    3804 - 3477 = 327f

* 2nd Goblin takes about 1000f frames for his moves.
    1st turn  7039 - 6785 = 254f
    2nd turn  7541 - 7301 = 240f
    3rd turn  8452 - 8215 = 237f
    4th turn  9359 - 9108 = 251f
    total                   982f

* 17f (約20f) to move 1 grid (約20f)
* LvUp effect は 24f??
* LvUp effect は 40f?? Lv effect 中は 0x1FFE88 が 0x0137 になる



Holy Knight / White Knight
--------------------------
Stasis Sword    不動無明剣        Stop                100
Split Punch     乱命割殺打        Doom (死の宣告)     400
Crush Punch     北斗骨砕打        K.O. (デス)         500
Lightning Stab  無双稲妻突き      Silence             700
Holy Explosion  聖光爆裂破        Confuse             800


Zodiac sign
-----------
0x00 = 白羊 = Aries
0x10 = 金牛 = Taurus
0x20 = 双子 = Gemini
0x30 = 巨蟹 = Cancer
0x40 = 獅子 = Leo
0x50 = 処女 = Virgo
0x60 = 天秤 = Libra
0x70 = 天蝎 = Scorpio
0x80 = 人馬 = Sagittarius
0x90 = 磨羯 = Capricorn
0xA0 = 宝瓶 = Aquarius
0xB0 = 双魚 = Pisces
0xC0 = 蛇遣 = Serpentarius (neutral to all signs)

* Ramza 0x90
  * very good    0x30         female Cancer
  * good         0x10, 0x50   Taurus, Virgo
  * bad          0x00, 0x60   Aries, Scorpio
  * very bad     0x30         male Cancer

Magic Formula
-------------
* Bolt
  * Damage = [CFa/100 * TFa/100 * MA * 14]
* Bolt2
  * Damage = [CFa/100 * TFa/100 * MA * 18]
* Bolt3
  * Damage = [CFa/100 * TFa/100 * MA * 24]
* Death
  * Success% = [CFa/100 * TFa/100 * (MA + 100)]
  * If target is immune to Dead status, then success% = 0.
* Flare
  * Damage = [CFa/100 * TFa/100 * MA * 46]
* Holy
  * Damage = [CFa/100 * TFa/100 * MA * 50]
* Demi
  * Success% = [CFa/100 * TFa/100 * (MA + 190)]
* Demi2
  * Success% = [CFa/100 * TFa/100 * (MA + 120)]



Lucavi
--------
| name     |Lv|HP        |MP        |SP|PA|MA|
|----------|--|----------|----------|--|--|--|
| Queklain |20| 480〜 511|  343〜368| 9|10| 8|
| Velius   |31|1041〜1131|  253〜285| 8|12〜14|11〜13|
| Zarela   |44|1098〜1171|  687〜736|11|15|10|
| Adramelk |46|1405〜1525|  386〜435|10|14〜16|10〜12|
| Hashmalum|59|1359〜1450|  764〜818|13|17|11|
| Altima   |56|1281〜1391|  432〜485| 9|13〜15|13〜15|
| Altima2  |66|3022〜3281|  405〜455|12|16〜19|15〜18|


Play Movie
----------
* FFT NA Any% PB - 3:58:26
* http://www.twitch.tv/claude/c/5920172

* FFT RTA - 4:20:54 Part 1
* http://www.twitch.tv/tideruglia/c/6013890


Encount research of random battle
----------------------------------
* lua で検証できたこと
  * frame数が同じなら乱数を変えてもエンカウントする・しないの判定は変化しない
  * frame数が同じなら乱数を変えても出撃する・しないの判定は変化しない

* エンカウントするかどうかの判定
  * http://ffhacktics.com/wiki/0008f08c_-_0008f280
  * 0008f08c - 0008f280
    * 戻り値が 0 ならエンカウント. 1 なら無し
    * 乱数call (jal 0x0002230c) が 2ヶ所にあるがどちらも最終的に
      15bit 右シフトしているので 50% chance
    * コード上は乱数が影響しているように見えるが lua の検証結果と矛盾する


* 出撃するかどうかの判定
  * http://ffhacktics.com/wiki/Big_ENTD_unit_loading_routine
  * 0017F8A0 - 0017FBE8: Big ENTD unit loading routine
    <code>
    0017fa2c: 0c0088c3 jal 0x0002230c
    0017fa30: 00000000 nop
    0017fa34: 30420001 andi r2,r2,0x0001               r2 = 1 or 0. which means 50% chance to exist.
    0017fa38: 1040000a beq r2,r0,0x0017fa64            branch if unit can exist?
    </code>
  * コード上は乱数が影響しているように見えるが lua の検証結果と矛盾する


ROM hack
--------
* No Random Battles
  WLDCORE.BIN
  0x2770A change 0x40 to 0x00

* Main Data Locations:
  * RAM -> File
  *  -0x67000 -> Battle.bin
  *  -0xE0000 -> World.bin
  *   -0xF800 -> SCUS
  * -0x1BF000 -> REQUIRE.OUT
  * -0x1BF000 -> EQUIP.OUT
  * -0x1BF000 -> ATTACK.OUT

